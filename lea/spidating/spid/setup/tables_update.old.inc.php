<?php
/**
 * eGroupWare - Setup
 * http://www.egroupware.org
 * Created by eTemplates DB-Tools written by ralfbecker@outdoor-training.de
 *
 * @license http://opensource.org/licenses/gpl-license.php GPL - GNU General Public License
 * @package spid
 * @subpackage setup
 * @version $Id$
 */

// function spid_upgrade1_01()
// {
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_clients','client_name',array(
		// 'type' => 'varchar',
		// 'precision' => '50',
		// 'nullable' => False
	// ));

	// return $GLOBALS['setup_info']['spid']['currentver'] = '1.02';
// }




// function spid_upgrade1_02()
// {
	// $GLOBALS['egw_setup']->oProc->RenameColumn('spid_reponses_standard','name','canned_name');
	// $GLOBALS['egw_setup']->oProc->RenameColumn('spid_reponses_standard','content','canned_content');

	// return $GLOBALS['setup_info']['spid']['currentver'] = '1.03';
// }


// function spid_upgrade1_03()
// {
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_tickets','creation_date',array(
		// 'type' => 'date',
		// 'precision' => '11'
	// ));
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_tickets','change_date',array(
		// 'type' => 'date',
		// 'precision' => '11'
	// ));
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_tickets','closed_date',array(
		// 'type' => 'date',
		// 'precision' => '11'
	// ));

	// return $GLOBALS['setup_info']['spid']['currentver'] = '1.04';
// }

// function spid_upgrade1_04()
// {
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_reponses','creation_date',array(
		// 'type' => 'date'
	// ));
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_reponses','change_date',array(
		// 'type' => 'date'
	// ));
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_reponses_standard','creation_date',array(
		// 'type' => 'date'
	// ));
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_reponses_standard','change_date',array(
		// 'type' => 'date'
	// ));
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_tickets','creation_date',array(
		// 'type' => 'date'
	// ));
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_reponses','creation_date',array(
		// 'type' => 'date'
	// ));
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_tickets','change_date',array(
		// 'type' => 'date'
	// ));
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_tickets','closed_date',array(
		// 'type' => 'date'
	// ));
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_factures','creation_date',array(
		// 'type' => 'date'
	// ));
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_factures','change_date',array(
		// 'type' => 'date'
	// ));
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_factures','send_date',array(
		// 'type' => 'date'
	// ));
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_factures','validation_date',array(
		// 'type' => 'date'
	// ));
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_factures','start_period_date',array(
		// 'type' => 'date'
	// ));
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_factures','end_period_date',array(
		// 'type' => 'date'
	// ));
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_prix_parametres','creation_date',array(
		// 'type' => 'date'
	// ));
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_prix_parametres','change_date',array(
		// 'type' => 'date'
	// ));

	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_tickets','creation_date',array(
		// 'type' => 'int',
		// 'precision' => '20'
	// ));
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_tickets','change_date',array(
		// 'type' => 'int',
		// 'precision' => '20'
	// ));
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_tickets','closed_date',array(
		// 'type' => 'int',
		// 'precision' => '20'
	// ));

	// return $GLOBALS['setup_info']['spid']['currentver'] = '1.05';
// }


// function spid_upgrade1_05()
// {
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_factures','creation_date',array(
		// 'type' => 'int',
		// 'precision' => '20'
	// ));
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_factures','change_date',array(
		// 'type' => 'int',
		// 'precision' => '20'
	// ));
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_factures','send_date',array(
		// 'type' => 'int',
		// 'precision' => '20'
	// ));
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_factures','validation_date',array(
		// 'type' => 'int',
		// 'precision' => '20'
	// ));
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_factures','start_period_date',array(
		// 'type' => 'int',
		// 'precision' => '20'
	// ));
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_factures','end_period_date',array(
		// 'type' => 'int',
		// 'precision' => '20'
	// ));

	// return $GLOBALS['setup_info']['spid']['currentver'] = '1.06';
// }


// function spid_upgrade1_06()
// {
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_prix_parametres','creation_date',array(
		// 'type' => 'int',
		// 'precision' => '20'
	// ));
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_prix_parametres','change_date',array(
		// 'type' => 'int',
		// 'precision' => '20'
	// ));

	// return $GLOBALS['setup_info']['spid']['currentver'] = '1.07';
// }


// function spid_upgrade1_07()
// {
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_reponses','creation_date',array(
		// 'type' => 'int',
		// 'precision' => '20'
	// ));
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_reponses','change_date',array(
		// 'type' => 'int',
		// 'precision' => '20'
	// ));

	// return $GLOBALS['setup_info']['spid']['currentver'] = '1.08';
// }


// function spid_upgrade1_08()
// {
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_reponses_standard','creation_date',array(
		// 'type' => 'int',
		// 'precision' => '20'
	// ));
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_reponses_standard','change_date',array(
		// 'type' => 'int',
		// 'precision' => '20'
	// ));

	// return $GLOBALS['setup_info']['spid']['currentver'] = '1.09';
// }


// function spid_upgrade1_09()
// {
	// $GLOBALS['egw_setup']->oProc->RenameColumn('spid_tickets','id_group','account_id');

	// return $GLOBALS['setup_info']['spid']['currentver'] = '1.10';
// }

// function spid_upgrade1_10()
// {
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_factures','facture_number',array(
		// 'type' => 'varchar',
		// 'precision' => '11'
	// ));

	// return $GLOBALS['setup_info']['spid']['currentver'] = '1.011';
// }





// function spid_upgrade1_011()
// {
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_factures','facture_number',array(
		// 'type' => 'varchar',
		// 'precision' => '12'
	// ));

	// return $GLOBALS['setup_info']['spid']['currentver'] = '1.012';
// }


// function spid_upgrade1_012()
// {
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_factures','facture_number',array(
		// 'type' => 'varchar',
		// 'precision' => '11'
	// ));

	// return $GLOBALS['setup_info']['spid']['currentver'] = '1.013';
// }


// function spid_upgrade1_013()
// {
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_clients','client_phone',array(
		// 'type' => 'varchar',
		// 'precision' => '11'
	// ));

	// return $GLOBALS['setup_info']['spid']['currentver'] = '1.014';
// }


// function spid_upgrade1_014()
// {
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_clients','client_phone',array(
		// 'type' => 'text',
		// 'precision' => '11'
	// ));

	// return $GLOBALS['setup_info']['spid']['currentver'] = '1.015';
// }


// function spid_upgrade1_015()
// {
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_clients','client_phone',array(
		// 'type' => 'varchar',
		// 'precision' => '10'
	// ));

	// return $GLOBALS['setup_info']['spid']['currentver'] = '1.016';
// }


// function spid_upgrade1_016()
// {
	// $GLOBALS['egw_setup']->oProc->AddColumn('spid_clients','account_id',array(
		// 'type' => 'int',
		// 'precision' => '11'
	// ));

	// return $GLOBALS['setup_info']['spid']['currentver'] = '1.017';
// }


// function spid_upgrade1_017()
// {
	// $GLOBALS['egw_setup']->oProc->DropColumn('spid_clients',array(
		// 'fd' => array(
			// 'client_id' => array('type' => 'auto','nullable' => False),
			// 'client_name' => array('type' => 'varchar','precision' => '50','nullable' => False),
			// 'client_contact_name' => array('type' => 'varchar','precision' => '100'),
			// 'client_contact_email' => array('type' => 'varchar','precision' => '50'),
			// 'client_address' => array('type' => 'varchar','precision' => '50'),
			// 'client_city' => array('type' => 'varchar','precision' => '50'),
			// 'client_postal_code' => array('type' => 'int','precision' => '11'),
			// 'client_email' => array('type' => 'varchar','precision' => '50'),
			// 'client_phone' => array('type' => 'varchar','precision' => '10'),
			// 'client_operation_code' => array('type' => 'varchar','precision' => '50'),
			// 'client_tva' => array('type' => 'int','precision' => '4','default' => '1'),
			// 'client_billable_by' => array('type' => 'varchar','precision' => '50'),
			// 'client_payment_model' => array('type' => 'varchar','precision' => '50')
		// ),
		// 'pk' => array('client_id'),
		// 'fk' => array(),
		// 'ix' => array(),
		// 'uc' => array()
	// ),'account_id');

	// return $GLOBALS['setup_info']['spid']['currentver'] = '1.018';
// }


// function spid_upgrade1_018()
// {
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_factures','price_ht',array(
		// 'type' => 'decimal',
		// 'precision' => '9',
		// 'scale' => '2'
	// ));
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_factures','price_tva',array(
		// 'type' => 'decimal',
		// 'precision' => '9',
		// 'scale' => '2'
	// ));
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_factures','price_ttc',array(
		// 'type' => 'decimal',
		// 'precision' => '9',
		// 'scale' => '2'
	// ));

	// return $GLOBALS['setup_info']['spid']['currentver'] = '1.019';
// }


// function spid_upgrade1_019()
// {
	// $GLOBALS['egw_setup']->oProc->RenameColumn('spid_clients','client_name','account_id');
	// $GLOBALS['egw_setup']->oProc->RenameColumn('spid_clients','client_contact_name','client_first_name');
	// $GLOBALS['egw_setup']->oProc->RenameColumn('spid_clients','client_contact_email','client_last_name');
	// $GLOBALS['egw_setup']->oProc->RenameColumn('spid_clients','client_address','client_company');
	// $GLOBALS['egw_setup']->oProc->RenameColumn('spid_clients','client_city','xclient_adr_one_street');
	// $GLOBALS['egw_setup']->oProc->RenameColumn('spid_clients','client_postal_code','xclient_adr_two_street');
	// $GLOBALS['egw_setup']->oProc->RenameColumn('spid_clients','client_phone','client_postalcode');
	// $GLOBALS['egw_setup']->oProc->RenameColumn('spid_clients','client_billable_by','client_operation_code');
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_clients','account_id',array(
		// 'type' => 'int',
		// 'precision' => '4',
		// 'nullable' => False
	// ));
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_clients','client_first_name',array(
		// 'type' => 'varchar',
		// 'precision' => '50'
	// ));
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_clients','client_company',array(
		// 'type' => 'varchar',
		// 'precision' => '100'
	// ));
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_clients','xclient_adr_one_street',array(
		// 'type' => 'varchar',
		// 'precision' => '100'
	// ));
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_clients','xclient_adr_two_street',array(
		// 'type' => 'int',
		// 'precision' => '100'
	// ));
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_clients','client_email',array(
		// 'type' => 'varchar',
		// 'precision' => '150'
	// ));
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_clients','client_tel',array(
		// 'type' => 'varchar',
		// 'precision' => '40'
	// ));
	// $GLOBALS['egw_setup']->oProc->AddColumn('spid_clients','client_operation_code',array(
		// 'type' => 'varchar',
		// 'precision' => '15'
	// ));
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_clients','client_tva',array(
		// 'type' => 'bool',
		// 'nullable' => False,
		// 'default' => '1'
	// ));
	// $GLOBALS['egw_setup']->oProc->AddColumn('spid_clients','client_billable_id',array(
		// 'type' => 'int',
		// 'precision' => '4',
		// 'nullable' => False,
		// 'default' => '1'
	// ));
	// $GLOBALS['egw_setup']->oProc->AddColumn('spid_clients','client_payment_model',array(
		// 'type' => 'varchar',
		// 'precision' => '50'
	// ));

	// return $GLOBALS['setup_info']['spid']['currentver'] = '1.020';
// }


// function spid_upgrade1_020()
// {
	// $GLOBALS['egw_setup']->oProc->AddColumn('spid_clients','account_id',array(
		// 'type' => 'int',
		// 'precision' => '4',
		// 'nullable' => False
	// ));
	// $GLOBALS['egw_setup']->oProc->AddColumn('spid_clients','client_first_name',array(
		// 'type' => 'varchar',
		// 'precision' => '50'
	// ));
	// $GLOBALS['egw_setup']->oProc->AddColumn('spid_clients','client_last_name',array(
		// 'type' => 'varchar',
		// 'precision' => '50'
	// ));
	// $GLOBALS['egw_setup']->oProc->AddColumn('spid_clients','client_company',array(
		// 'type' => 'varchar',
		// 'precision' => '100'
	// ));
	// $GLOBALS['egw_setup']->oProc->AddColumn('spid_clients','xclient_adr_one_street',array(
		// 'type' => 'varchar',
		// 'precision' => '100'
	// ));
	// $GLOBALS['egw_setup']->oProc->AddColumn('spid_clients','xclient_adr_two_street',array(
		// 'type' => 'int',
		// 'precision' => '100'
	// ));
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_clients','client_locality',array(
		// 'type' => 'varchar',
		// 'precision' => '50'
	// ));
	// $GLOBALS['egw_setup']->oProc->AddColumn('spid_clients','client_postalcode',array(
		// 'type' => 'varchar',
		// 'precision' => '10'
	// ));
	// $GLOBALS['egw_setup']->oProc->AddColumn('spid_clients','client_email',array(
		// 'type' => 'varchar',
		// 'precision' => '150'
	// ));
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_clients','client_tel',array(
		// 'type' => 'varchar',
		// 'precision' => '40'
	// ));
	// $GLOBALS['egw_setup']->oProc->AddColumn('spid_clients','client_operation_code',array(
		// 'type' => 'varchar',
		// 'precision' => '15'
	// ));
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_clients','client_tva',array(
		// 'type' => 'bool',
		// 'nullable' => False,
		// 'default' => '1'
	// ));
	// $GLOBALS['egw_setup']->oProc->AddColumn('spid_clients','client_payment_model',array(
		// 'type' => 'varchar',
		// 'precision' => '50'
	// ));

	// return $GLOBALS['setup_info']['spid']['currentver'] = '1.021';
// }


// function spid_upgrade1_021()
// {
	// $GLOBALS['egw_setup']->oProc->RenameColumn('spid_clients','xclient_adr_one_street','client_adr_one_street');
	// $GLOBALS['egw_setup']->oProc->RenameColumn('spid_clients','xclient_adr_two_street','client_adr_two_street');

	// return $GLOBALS['setup_info']['spid']['currentver'] = '1.022';
// }


// function spid_upgrade1_022()
// {
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_clients','client_payment_model',array(
		// 'type' => 'varchar',
		// 'precision' => '50',
		// 'nullable' => False
	// ));

	// return $GLOBALS['setup_info']['spid']['currentver'] = '1.023';
// }


// function spid_upgrade1_023()
// {
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_clients','client_tva',array(
		// 'type' => 'int',
		// 'precision' => '1',
		// 'nullable' => False,
		// 'default' => '1'
	// ));

	// return $GLOBALS['setup_info']['spid']['currentver'] = '1.024';
// }


// function spid_upgrade1_024()
// {
	// $GLOBALS['egw_setup']->oProc->AddColumn('spid_clients','client_fn',array(
		// 'type' => 'varchar',
		// 'precision' => '100'
	// ));

	// return $GLOBALS['setup_info']['spid']['currentver'] = '1.025';
// }


// function spid_upgrade1_025()
// {
	// $GLOBALS['egw_setup']->oProc->AddColumn('spid_clients','creator_id',array(
		// 'type' => 'int',
		// 'precision' => '4'
	// ));
	// $GLOBALS['egw_setup']->oProc->AddColumn('spid_clients','creation_date',array(
		// 'type' => 'timestamp'
	// ));
	// $GLOBALS['egw_setup']->oProc->AddColumn('spid_clients','change_date',array(
		// 'type' => 'timestamp'
	// ));

	// return $GLOBALS['setup_info']['spid']['currentver'] = '1.026';
// }


// function spid_upgrade1_026()
// {
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_clients','creation_date',array(
		// 'type' => 'int',
		// 'precision' => '4'
	// ));
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_clients','change_date',array(
		// 'type' => 'int',
		// 'precision' => '4'
	// ));

	// return $GLOBALS['setup_info']['spid']['currentver'] = '1.027';
// }


// function spid_upgrade1_027()
// {
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_clients','creation_date',array(
		// 'type' => 'int',
		// 'precision' => '20'
	// ));
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_clients','change_date',array(
		// 'type' => 'int',
		// 'precision' => '20'
	// ));

	// return $GLOBALS['setup_info']['spid']['currentver'] = '1.028';
// }


// function spid_upgrade1_028()
// {
	// $GLOBALS['egw_setup']->oProc->AddColumn('spid_tickets','due_date',array(
		// 'type' => 'int',
		// 'precision' => '20'
	// ));

	// return $GLOBALS['setup_info']['spid']['currentver'] = '1.029';
// }


// function spid_upgrade1_029()
// {
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_clients','client_first_name',array(
		// 'type' => 'varchar',
		// 'precision' => '50',
		// 'default' => 'NULL'
	// ));
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_clients','client_last_name',array(
		// 'type' => 'varchar',
		// 'precision' => '50',
		// 'default' => 'NULL'
	// ));
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_clients','client_company',array(
		// 'type' => 'varchar',
		// 'precision' => '100',
		// 'default' => 'NULL'
	// ));
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_clients','client_adr_one_street',array(
		// 'type' => 'varchar',
		// 'precision' => '100',
		// 'default' => 'NULL'
	// ));
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_clients','client_adr_two_street',array(
		// 'type' => 'varchar',
		// 'precision' => '100',
		// 'default' => 'NULL'
	// ));
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_clients','client_locality',array(
		// 'type' => 'varchar',
		// 'precision' => '50',
		// 'default' => 'NULL'
	// ));
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_clients','client_postalcode',array(
		// 'type' => 'varchar',
		// 'precision' => '10',
		// 'default' => 'NULL'
	// ));
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_clients','client_email',array(
		// 'type' => 'varchar',
		// 'precision' => '150',
		// 'default' => 'NULL'
	// ));
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_clients','client_tel',array(
		// 'type' => 'varchar',
		// 'precision' => '40',
		// 'default' => 'NULL'
	// ));
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_clients','client_operation_code',array(
		// 'type' => 'varchar',
		// 'precision' => '15',
		// 'default' => 'NULL'
	// ));
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_clients','client_payment_model',array(
		// 'type' => 'varchar',
		// 'precision' => '50',
		// 'nullable' => False,
		// 'default' => 'NULL'
	// ));
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_clients','client_fn',array(
		// 'type' => 'varchar',
		// 'precision' => '100',
		// 'default' => 'NULL'
	// ));

	// return $GLOBALS['setup_info']['spid']['currentver'] = '1.030';
// }


// function spid_upgrade1_030()
// {
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_clients','client_payment_model',array(
		// 'type' => 'int',
		// 'precision' => '4',
		// 'nullable' => False,
		// 'default' => '0'
	// ));

	// return $GLOBALS['setup_info']['spid']['currentver'] = '1.031';
// }


// function spid_upgrade1_031()
// {
	// $GLOBALS['egw_setup']->oProc->DropColumn('spid_factures',array(
		// 'fd' => array(
			// 'facture_id' => array('type' => 'auto','nullable' => False),
			// 'client_id' => array('type' => 'int','precision' => '11'),
			// 'creator_id' => array('type' => 'int','precision' => '11'),
			// 'facture_statistiques_id' => array('type' => 'int','precision' => '11'),
			// 'facture_number' => array('type' => 'varchar','precision' => '11'),
			// 'price_ht' => array('type' => 'decimal','precision' => '9','scale' => '2'),
			// 'price_tva' => array('type' => 'decimal','precision' => '9','scale' => '2'),
			// 'price_ttc' => array('type' => 'decimal','precision' => '9','scale' => '2'),
			// 'ticket_number_open_start' => array('type' => 'int','precision' => '11'),
			// 'ticket_number_open_during' => array('type' => 'int','precision' => '11'),
			// 'ticket_number_close_during' => array('type' => 'int','precision' => '11'),
			// 'ticket_number_open_end' => array('type' => 'int','precision' => '11'),
			// 'creation_date' => array('type' => 'int','precision' => '20'),
			// 'change_date' => array('type' => 'int','precision' => '20'),
			// 'send_date' => array('type' => 'int','precision' => '20'),
			// 'validation_date' => array('type' => 'int','precision' => '20'),
			// 'start_period_date' => array('type' => 'int','precision' => '20'),
			// 'end_period_date' => array('type' => 'int','precision' => '20')
		// ),
		// 'pk' => array('facture_id'),
		// 'fk' => array(),
		// 'ix' => array(),
		// 'uc' => array()
	// ),'facture_details_id');
	// $GLOBALS['egw_setup']->oProc->DropColumn('spid_factures',array(
		// 'fd' => array(
			// 'facture_id' => array('type' => 'auto','nullable' => False),
			// 'client_id' => array('type' => 'int','precision' => '11'),
			// 'creator_id' => array('type' => 'int','precision' => '11'),
			// 'facture_number' => array('type' => 'varchar','precision' => '11'),
			// 'price_ht' => array('type' => 'decimal','precision' => '9','scale' => '2'),
			// 'price_tva' => array('type' => 'decimal','precision' => '9','scale' => '2'),
			// 'price_ttc' => array('type' => 'decimal','precision' => '9','scale' => '2'),
			// 'ticket_number_open_start' => array('type' => 'int','precision' => '11'),
			// 'ticket_number_open_during' => array('type' => 'int','precision' => '11'),
			// 'ticket_number_close_during' => array('type' => 'int','precision' => '11'),
			// 'ticket_number_open_end' => array('type' => 'int','precision' => '11'),
			// 'creation_date' => array('type' => 'int','precision' => '20'),
			// 'change_date' => array('type' => 'int','precision' => '20'),
			// 'send_date' => array('type' => 'int','precision' => '20'),
			// 'validation_date' => array('type' => 'int','precision' => '20'),
			// 'start_period_date' => array('type' => 'int','precision' => '20'),
			// 'end_period_date' => array('type' => 'int','precision' => '20')
		// ),
		// 'pk' => array('facture_id'),
		// 'fk' => array(),
		// 'ix' => array(),
		// 'uc' => array()
	// ),'facture_statistiques_id');
	// $GLOBALS['egw_setup']->oProc->DropColumn('spid_factures',array(
		// 'fd' => array(
			// 'facture_id' => array('type' => 'auto','nullable' => False),
			// 'client_id' => array('type' => 'int','precision' => '11'),
			// 'creator_id' => array('type' => 'int','precision' => '11'),
			// 'facture_number' => array('type' => 'varchar','precision' => '11'),
			// 'price_ht' => array('type' => 'decimal','precision' => '9','scale' => '2'),
			// 'price_ttc' => array('type' => 'decimal','precision' => '9','scale' => '2'),
			// 'ticket_number_open_start' => array('type' => 'int','precision' => '11'),
			// 'ticket_number_open_during' => array('type' => 'int','precision' => '11'),
			// 'ticket_number_close_during' => array('type' => 'int','precision' => '11'),
			// 'ticket_number_open_end' => array('type' => 'int','precision' => '11'),
			// 'creation_date' => array('type' => 'int','precision' => '20'),
			// 'change_date' => array('type' => 'int','precision' => '20'),
			// 'send_date' => array('type' => 'int','precision' => '20'),
			// 'validation_date' => array('type' => 'int','precision' => '20'),
			// 'start_period_date' => array('type' => 'int','precision' => '20'),
			// 'end_period_date' => array('type' => 'int','precision' => '20')
		// ),
		// 'pk' => array('facture_id'),
		// 'fk' => array(),
		// 'ix' => array(),
		// 'uc' => array()
	// ),'price_tva');
	// $GLOBALS['egw_setup']->oProc->DropColumn('spid_factures',array(
		// 'fd' => array(
			// 'facture_id' => array('type' => 'auto','nullable' => False),
			// 'client_id' => array('type' => 'int','precision' => '11'),
			// 'creator_id' => array('type' => 'int','precision' => '11'),
			// 'facture_number' => array('type' => 'varchar','precision' => '11'),
			// 'price_ht' => array('type' => 'decimal','precision' => '9','scale' => '2'),
			// 'ticket_number_open_start' => array('type' => 'int','precision' => '11'),
			// 'ticket_number_open_during' => array('type' => 'int','precision' => '11'),
			// 'ticket_number_close_during' => array('type' => 'int','precision' => '11'),
			// 'ticket_number_open_end' => array('type' => 'int','precision' => '11'),
			// 'creation_date' => array('type' => 'int','precision' => '20'),
			// 'change_date' => array('type' => 'int','precision' => '20'),
			// 'send_date' => array('type' => 'int','precision' => '20'),
			// 'validation_date' => array('type' => 'int','precision' => '20'),
			// 'start_period_date' => array('type' => 'int','precision' => '20'),
			// 'end_period_date' => array('type' => 'int','precision' => '20')
		// ),
		// 'pk' => array('facture_id'),
		// 'fk' => array(),
		// 'ix' => array(),
		// 'uc' => array()
	// ),'price_ttc');
	// $GLOBALS['egw_setup']->oProc->RenameColumn('spid_factures','ticket_number_open_start','nb_open_start');
	// $GLOBALS['egw_setup']->oProc->RenameColumn('spid_factures','ticket_number_open_during','nb_open_during');
	// $GLOBALS['egw_setup']->oProc->RenameColumn('spid_factures','ticket_number_close_during','nb_close_during');
	// $GLOBALS['egw_setup']->oProc->RenameColumn('spid_factures','ticket_number_open_end','nb_open_end');

	// return $GLOBALS['setup_info']['spid']['currentver'] = '1.032';
// }


// function spid_upgrade1_032()
// {
	// $GLOBALS['egw_setup']->oProc->RenameColumn('spid_factures_details','facture_details_id','detail_id');
	// $GLOBALS['egw_setup']->oProc->RenameColumn('spid_factures_details','price_ht','facture_id');
	// $GLOBALS['egw_setup']->oProc->RenameColumn('spid_factures_details','tickets_number','quantity');
	// $GLOBALS['egw_setup']->oProc->RenameColumn('spid_factures_details','ticket_spend_time','spend_time');
	// $GLOBALS['egw_setup']->oProc->RenameColumn('spid_factures_details','type_intervention','total_ht');
	// /* done by RefreshTable() anyway
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_factures_details','facture_id',array(
		// 'type' => 'int',
		// 'precision' => '11'
	// ));*/
	// /* done by RefreshTable() anyway
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_factures_details','total_ht',array(
		// 'type' => 'decimal',
		// 'precision' => '8',
		// 'scale' => '2'
	// ));*/
	// $GLOBALS['egw_setup']->oProc->RefreshTable('spid_factures_details',array(
		// 'fd' => array(
			// 'detail_id' => array('type' => 'auto','nullable' => False),
			// 'facture_id' => array('type' => 'int','precision' => '11'),
			// 'quantity' => array('type' => 'int','precision' => '11'),
			// 'spend_time' => array('type' => 'int','precision' => '11'),
			// 'total_ht' => array('type' => 'decimal','precision' => '8','scale' => '2')
		// ),
		// 'pk' => array('detail_id'),
		// 'fk' => array(),
		// 'ix' => array(),
		// 'uc' => array()
	// ));

	// return $GLOBALS['setup_info']['spid']['currentver'] = '1.033';
// }


// function spid_upgrade1_033()
// {
	// $GLOBALS['egw_setup']->oProc->RenameColumn('spid_factures','price_ht','total_ht');

	// return $GLOBALS['setup_info']['spid']['currentver'] = '1.034';
// }


// function spid_upgrade1_034()
// {
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_factures_details','total_ht',array(
		// 'type' => 'decimal',
		// 'precision' => '9',
		// 'scale' => '2'
	// ));

	// return $GLOBALS['setup_info']['spid']['currentver'] = '1.035';
// }


// function spid_upgrade1_035()
// {
	// return $GLOBALS['setup_info']['spid']['currentver'] = '1.036';
// }


// function spid_upgrade1_036()
// {
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_factures_details','facture_id',array(
		// 'type' => 'int',
		// 'precision' => '11',
		// 'nullable' => False
	// ));
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_factures_details','quantity',array(
		// 'type' => 'int',
		// 'precision' => '11',
		// 'default' => '0'
	// ));
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_factures_details','spend_time',array(
		// 'type' => 'int',
		// 'precision' => '11',
		// 'default' => '0'
	// ));
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_factures_details','total_ht',array(
		// 'type' => 'decimal',
		// 'precision' => '9',
		// 'scale' => '2',
		// 'default' => '0'
	// ));

	// return $GLOBALS['setup_info']['spid']['currentver'] = '1.037';
// }


// function spid_upgrade1_037()
// {
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_factures','client_id',array(
		// 'type' => 'int',
		// 'precision' => '11',
		// 'nullable' => False
	// ));
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_factures','facture_number',array(
		// 'type' => 'varchar',
		// 'precision' => '11',
		// 'default' => 'NULL'
	// ));
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_factures','total_ht',array(
		// 'type' => 'decimal',
		// 'precision' => '9',
		// 'scale' => '2',
		// 'default' => '0'
	// ));
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_factures','nb_open_start',array(
		// 'type' => 'int',
		// 'precision' => '11',
		// 'default' => '0'
	// ));
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_factures','nb_open_during',array(
		// 'type' => 'int',
		// 'precision' => '11',
		// 'default' => '0'
	// ));
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_factures','nb_close_during',array(
		// 'type' => 'int',
		// 'precision' => '11',
		// 'default' => '0'
	// ));
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_factures','nb_open_end',array(
		// 'type' => 'int',
		// 'precision' => '11',
		// 'default' => '0'
	// ));

	// return $GLOBALS['setup_info']['spid']['currentver'] = '1.038';
// }


// function spid_upgrade1_038()
// {
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_factures','creation_date',array(
		// 'type' => 'int',
		// 'precision' => '20',
		// 'default' => 'NULL'
	// ));
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_factures','change_date',array(
		// 'type' => 'int',
		// 'precision' => '20',
		// 'default' => 'NULL'
	// ));
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_factures','send_date',array(
		// 'type' => 'int',
		// 'precision' => '20',
		// 'default' => 'NULL'
	// ));
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_factures','validation_date',array(
		// 'type' => 'int',
		// 'precision' => '20',
		// 'default' => 'NULL'
	// ));
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_factures','start_period_date',array(
		// 'type' => 'int',
		// 'precision' => '20',
		// 'default' => 'NULL'
	// ));
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_factures','end_period_date',array(
		// 'type' => 'int',
		// 'precision' => '20',
		// 'default' => 'NULL'
	// ));

	// return $GLOBALS['setup_info']['spid']['currentver'] = '1.039';
// }


// function spid_upgrade1_039()
// {
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_factures','creator_id',array(
		// 'type' => 'int',
		// 'precision' => '11',
		// 'nullable' => False
	// ));

	// return $GLOBALS['setup_info']['spid']['currentver'] = '1.040';
// }


// function spid_upgrade1_040()
// {
	// $GLOBALS['egw_setup']->oProc->AddColumn('spid_tickets','ticket_closed',array(
		// 'type' => 'int',
		// 'precision' => '2',
		// 'default' => '0'
	// ));
	// $GLOBALS['egw_setup']->oProc->AddColumn('spid_tickets','ticket_invoice',array(
		// 'type' => 'int',
		// 'precision' => '2',
		// 'default' => '0'
	// ));

	// return $GLOBALS['setup_info']['spid']['currentver'] = '1.041';
// }


// function spid_upgrade1_041()
// {
	// $GLOBALS['egw_setup']->oProc->AddColumn('spid_factures','account_id',array(
		// 'type' => 'int',
		// 'precision' => '11',
		// 'nullable' => False
	// ));

	// return $GLOBALS['setup_info']['spid']['currentver'] = '1.042';
// }


// function spid_upgrade1_042()
// {
	// $GLOBALS['egw_setup']->oProc->DropColumn('spid_prix_parametres',array(
		// 'fd' => array(
			// 'price_id' => array('type' => 'auto','nullable' => False),
			// 'client_id' => array('type' => 'int','precision' => '11'),
			// 'state_id' => array('type' => 'int','precision' => '11'),
			// 'creator_id' => array('type' => 'int','precision' => '11'),
			// 'price_ht' => array('type' => 'decimal','precision' => '8','scale' => '2'),
			// 'price_ttc' => array('type' => 'decimal','precision' => '8','scale' => '2'),
			// 'ticket_spend_time' => array('type' => 'int','precision' => '11'),
			// 'creation_date' => array('type' => 'int','precision' => '20'),
			// 'change_date' => array('type' => 'int','precision' => '20')
		// ),
		// 'pk' => array('price_id'),
		// 'fk' => array(),
		// 'ix' => array(),
		// 'uc' => array()
	// ),'price_tva');
	// $GLOBALS['egw_setup']->oProc->DropColumn('spid_prix_parametres',array(
		// 'fd' => array(
			// 'price_id' => array('type' => 'auto','nullable' => False),
			// 'client_id' => array('type' => 'int','precision' => '11'),
			// 'state_id' => array('type' => 'int','precision' => '11'),
			// 'creator_id' => array('type' => 'int','precision' => '11'),
			// 'price_ht' => array('type' => 'decimal','precision' => '8','scale' => '2'),
			// 'ticket_spend_time' => array('type' => 'int','precision' => '11'),
			// 'creation_date' => array('type' => 'int','precision' => '20'),
			// 'change_date' => array('type' => 'int','precision' => '20')
		// ),
		// 'pk' => array('price_id'),
		// 'fk' => array(),
		// 'ix' => array(),
		// 'uc' => array()
	// ),'price_ttc');
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_prix_parametres','price_ht',array(
		// 'type' => 'decimal',
		// 'precision' => '8',
		// 'scale' => '2',
		// 'default' => '0'
	// ));
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_prix_parametres','ticket_spend_time',array(
		// 'type' => 'int',
		// 'precision' => '11',
		// 'default' => '0'
	// ));

	// return $GLOBALS['setup_info']['spid']['currentver'] = '1.043';
// }


// function spid_upgrade1_043()
// {
	// $GLOBALS['egw_setup']->oProc->AddColumn('spid_prix_parametres','account_id',array(
		// 'type' => 'int',
		// 'precision' => '11'
	// ));

	// return $GLOBALS['setup_info']['spid']['currentver'] = '1.044';
// }


// function spid_upgrade1_044()
// {
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_factures','total_ht',array(
		// 'type' => 'decimal',
		// 'precision' => '9',
		// 'scale' => '2',
		// 'default' => '0.00'
	// ));

	// return $GLOBALS['setup_info']['spid']['currentver'] = '1.045';
// }


// function spid_upgrade1_045()
// {
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_clients','creator_id',array(
		// 'type' => 'int',
		// 'precision' => '4',
		// 'nullable' => False
	// ));
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_clients','creation_date',array(
		// 'type' => 'int',
		// 'precision' => '20',
		// 'nullable' => False
	// ));
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_clients','change_date',array(
		// 'type' => 'int',
		// 'precision' => '20',
		// 'nullable' => False
	// ));

	// return $GLOBALS['setup_info']['spid']['currentver'] = '1.046';
// }


// function spid_upgrade1_046()
// {
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_etats','state_name',array(
		// 'type' => 'varchar',
		// 'precision' => '50',
		// 'default' => 'NULL'
	// ));
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_etats','state_description',array(
		// 'type' => 'varchar',
		// 'precision' => '255',
		// 'default' => 'NULL'
	// ));
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_etats','state_initial',array(
		// 'type' => 'int',
		// 'precision' => '4',
		// 'default' => '0'
	// ));
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_etats','state_close',array(
		// 'type' => 'int',
		// 'precision' => '4',
		// 'default' => '0'
	// ));
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_etats','state_billable',array(
		// 'type' => 'int',
		// 'precision' => '4',
		// 'default' => '0'
	// ));
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_etats','facturation_label',array(
		// 'type' => 'varchar',
		// 'precision' => '255',
		// 'default' => 'NULL'
	// ));

	// return $GLOBALS['setup_info']['spid']['currentver'] = '1.047';
// }


// function spid_upgrade1_047()
// {
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_factures_details','total_ht',array(
		// 'type' => 'decimal',
		// 'precision' => '9',
		// 'scale' => '2',
		// 'default' => '0.00'
	// ));

	// return $GLOBALS['setup_info']['spid']['currentver'] = '1.048';
// }


// function spid_upgrade1_048()
// {
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_prix_parametres','client_id',array(
		// 'type' => 'int',
		// 'precision' => '11',
		// 'nullable' => False
	// ));
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_prix_parametres','state_id',array(
		// 'type' => 'int',
		// 'precision' => '11',
		// 'nullable' => False
	// ));
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_prix_parametres','creator_id',array(
		// 'type' => 'int',
		// 'precision' => '11',
		// 'nullable' => False
	// ));
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_prix_parametres','price_ht',array(
		// 'type' => 'decimal',
		// 'precision' => '8',
		// 'scale' => '2',
		// 'default' => '0.00'
	// ));
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_prix_parametres','creation_date',array(
		// 'type' => 'int',
		// 'precision' => '20',
		// 'nullable' => False
	// ));
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_prix_parametres','change_date',array(
		// 'type' => 'int',
		// 'precision' => '20',
		// 'nullable' => False
	// ));
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_prix_parametres','account_id',array(
		// 'type' => 'int',
		// 'precision' => '11',
		// 'nullable' => False
	// ));

	// return $GLOBALS['setup_info']['spid']['currentver'] = '1.049';
// }


// function spid_upgrade1_049()
// {
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_reponses','ticket_id',array(
		// 'type' => 'int',
		// 'precision' => '11',
		// 'nullable' => False
	// ));
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_reponses','creator_id',array(
		// 'type' => 'int',
		// 'precision' => '11',
		// 'nullable' => False
	// ));
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_reponses','reply_content',array(
		// 'type' => 'text',
		// 'precision' => '11',
		// 'default' => 'NULL'
	// ));
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_reponses','actions',array(
		// 'type' => 'varchar',
		// 'precision' => '50',
		// 'default' => 'NULL'
	// ));
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_reponses','old_value',array(
		// 'type' => 'varchar',
		// 'precision' => '20',
		// 'default' => 'NULL'
	// ));
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_reponses','new_value',array(
		// 'type' => 'varchar',
		// 'precision' => '20',
		// 'default' => 'NULL'
	// ));
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_reponses','creation_date',array(
		// 'type' => 'int',
		// 'precision' => '20',
		// 'nullable' => False
	// ));
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_reponses','change_date',array(
		// 'type' => 'int',
		// 'precision' => '20',
		// 'nullable' => False
	// ));

	// return $GLOBALS['setup_info']['spid']['currentver'] = '1.050';
// }


// function spid_upgrade1_050()
// {
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_reponses_standard','creator_id',array(
		// 'type' => 'int',
		// 'precision' => '11',
		// 'nullable' => False
	// ));
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_reponses_standard','canned_name',array(
		// 'type' => 'varchar',
		// 'precision' => '50',
		// 'default' => 'NULL'
	// ));
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_reponses_standard','canned_content',array(
		// 'type' => 'text',
		// 'precision' => '50',
		// 'default' => 'NULL'
	// ));
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_reponses_standard','creation_date',array(
		// 'type' => 'int',
		// 'precision' => '20',
		// 'nullable' => False
	// ));
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_reponses_standard','change_date',array(
		// 'type' => 'int',
		// 'precision' => '20',
		// 'nullable' => False
	// ));

	// return $GLOBALS['setup_info']['spid']['currentver'] = '1.051';
// }


// function spid_upgrade1_051()
// {
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_tickets','ticket_num_group',array(
		// 'type' => 'int',
		// 'precision' => '11',
		// 'nullable' => False
	// ));
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_tickets','cat_id',array(
		// 'type' => 'int',
		// 'precision' => '11',
		// 'default' => '0'
	// ));
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_tickets','account_id',array(
		// 'type' => 'int',
		// 'precision' => '11',
		// 'nullable' => False
	// ));
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_tickets','state_id',array(
		// 'type' => 'int',
		// 'precision' => '11',
		// 'default' => '0'
	// ));
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_tickets','facture_id',array(
		// 'type' => 'int',
		// 'precision' => '11',
		// 'default' => '0'
	// ));
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_tickets','creator_id',array(
		// 'type' => 'int',
		// 'precision' => '11',
		// 'nullable' => False
	// ));
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_tickets','ticket_title',array(
		// 'type' => 'varchar',
		// 'precision' => '50',
		// 'default' => 'NULL'
	// ));
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_tickets','ticket_priority',array(
		// 'type' => 'int',
		// 'precision' => '2',
		// 'default' => '0'
	// ));
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_tickets','ticket_assigned_to',array(
		// 'type' => 'int',
		// 'precision' => '11',
		// 'nullable' => False
	// ));
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_tickets','ticket_assigned_by',array(
		// 'type' => 'int',
		// 'precision' => '11',
		// 'nullable' => False
	// ));
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_tickets','ticket_spend_time',array(
		// 'type' => 'int',
		// 'precision' => '11',
		// 'default' => '0'
	// ));
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_tickets','creation_date',array(
		// 'type' => 'int',
		// 'precision' => '20',
		// 'nullable' => False
	// ));
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_tickets','change_date',array(
		// 'type' => 'int',
		// 'precision' => '20',
		// 'default' => '0'
	// ));
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_tickets','closed_date',array(
		// 'type' => 'int',
		// 'precision' => '20',
		// 'default' => '0'
	// ));
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_tickets','due_date',array(
		// 'type' => 'int',
		// 'precision' => '20',
		// 'default' => '0'
	// ));

	// return $GLOBALS['setup_info']['spid']['currentver'] = '1.052';
// }


// function spid_upgrade1_052()
// {
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_transitions','name',array(
		// 'type' => 'varchar',
		// 'precision' => '50',
		// 'default' => 'NULL'
	// ));
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_transitions','description',array(
		// 'type' => 'varchar',
		// 'precision' => '255',
		// 'default' => 'NULL'
	// ));
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_transitions','source_id',array(
		// 'type' => 'int',
		// 'precision' => '11',
		// 'default' => '0'
	// ));
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_transitions','target_id',array(
		// 'type' => 'int',
		// 'precision' => '11',
		// 'default' => '0'
	// ));

	// return $GLOBALS['setup_info']['spid']['currentver'] = '1.053';
// }


// function spid_upgrade1_053()
// {
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_clients','change_date',array(
		// 'type' => 'int',
		// 'precision' => '20',
		// 'default' => '0'
	// ));

	// return $GLOBALS['setup_info']['spid']['currentver'] = '1.054';
// }


// function spid_upgrade1_054()
// {
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_factures','creation_date',array(
		// 'type' => 'int',
		// 'precision' => '20',
		// 'nullable' => False
	// ));

	// return $GLOBALS['setup_info']['spid']['currentver'] = '1.055';
// }


// function spid_upgrade1_055()
// {
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_prix_parametres','change_date',array(
		// 'type' => 'int',
		// 'precision' => '20',
		// 'default' => '0'
	// ));

	// return $GLOBALS['setup_info']['spid']['currentver'] = '1.056';
// }


// function spid_upgrade1_056()
// {
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_reponses','change_date',array(
		// 'type' => 'int',
		// 'precision' => '20',
		// 'default' => '0'
	// ));

	// return $GLOBALS['setup_info']['spid']['currentver'] = '1.057';
// }


// function spid_upgrade1_057()
// {
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_reponses_standard','change_date',array(
		// 'type' => 'int',
		// 'precision' => '20',
		// 'default' => '0'
	// ));

	// return $GLOBALS['setup_info']['spid']['currentver'] = '1.058';
// }


// function spid_upgrade1_058()
// {
	// $GLOBALS['egw_setup']->oProc->AddColumn('spid_factures','generated_pdf',array(
		// 'type' => 'int',
		// 'precision' => '2',
		// 'default' => '0'
	// ));

	// return $GLOBALS['setup_info']['spid']['currentver'] = '1.059';
// }


// function spid_upgrade1_059()
// {
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_tickets','facture_id',array(
		// 'type' => 'int',
		// 'precision' => '11',
		// 'default' => 'NULL'
	// ));

	// return $GLOBALS['setup_info']['spid']['currentver'] = '1.060';
// }


// function spid_upgrade1_060()
// {
	// $GLOBALS['egw_setup']->oProc->AddColumn('spid_factures_details','state_id',array(
		// 'type' => 'int',
		// 'precision' => '11',
		// 'default' => '0'
	// ));

	// return $GLOBALS['setup_info']['spid']['currentver'] = '1.061';
// }


// function spid_upgrade1_061()
// {
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_factures_details','quantity',array(
		// 'type' => 'int',
		// 'precision' => '11',
		// 'default' => 'NULL'
	// ));
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_factures_details','spend_time',array(
		// 'type' => 'int',
		// 'precision' => '11',
		// 'default' => 'NULL'
	// ));
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_factures_details','state_id',array(
		// 'type' => 'int',
		// 'precision' => '11',
		// 'default' => 'NULL'
	// ));
	// $GLOBALS['egw_setup']->oProc->AddColumn('spid_factures_details','ticket_id',array(
		// 'type' => 'int',
		// 'precision' => '11',
		// 'default' => 'NULL'
	// ));

	// return $GLOBALS['setup_info']['spid']['currentver'] = '1.062';
// }


// function spid_upgrade1_062()
// {
	// $GLOBALS['egw_setup']->oProc->AddColumn('spid_factures','invoice_validate',array(
		// 'type' => 'int',
		// 'precision' => '2',
		// 'default' => '0'
	// ));

	// return $GLOBALS['setup_info']['spid']['currentver'] = '1.063';
// }


// function spid_upgrade1_063()
// {
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_tickets','facture_id',array(
		// 'type' => 'int',
		// 'precision' => '11',
		// 'default' => '0'
	// ));

	// return $GLOBALS['setup_info']['spid']['currentver'] = '1.064';
// }


// function spid_upgrade1_064()
// {
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_tickets','ticket_title',array(
		// 'type' => 'varchar',
		// 'precision' => '255',
		// 'default' => 'NULL'
	// ));

	// return $GLOBALS['setup_info']['spid']['currentver'] = '1.065';
// }


// function spid_upgrade1_065()
// {
	// $GLOBALS['egw_setup']->oProc->AddColumn('spid_reponses_standard','close_ticket',array(
		// 'type' => 'int',
		// 'precision' => '5',
		// 'default' => '0'
	// ));

	// return $GLOBALS['setup_info']['spid']['currentver'] = '1.066';
// }


// function spid_upgrade1_066()
// {
	// $GLOBALS['egw_setup']->oProc->AddColumn('spid_etats','creation_date',array(
		// 'type' => 'int',
		// 'precision' => '20',
		// 'default' => '0'
	// ));
	// $GLOBALS['egw_setup']->oProc->AddColumn('spid_etats','change_date',array(
		// 'type' => 'varchar',
		// 'precision' => '20',
		// 'default' => '0'
	// ));

	// return $GLOBALS['setup_info']['spid']['currentver'] = '1.067';
// }


// function spid_upgrade1_067()
// {
	// $GLOBALS['egw_setup']->oProc->AddColumn('spid_transitions','creation_date',array(
		// 'type' => 'int',
		// 'precision' => '20',
		// 'default' => '0'
	// ));
	// $GLOBALS['egw_setup']->oProc->AddColumn('spid_transitions','change_date',array(
		// 'type' => 'int',
		// 'precision' => '20',
		// 'default' => '0'
	// ));

	// return $GLOBALS['setup_info']['spid']['currentver'] = '1.068';
// }


// function spid_upgrade1_068()
// {
	// $GLOBALS['egw_setup']->oProc->AddColumn('spid_reponses_standard','state_id',array(
		// 'type' => 'int',
		// 'precision' => '1',
		// 'default' => 'NULL'
	// ));

	// return $GLOBALS['setup_info']['spid']['currentver'] = '1.069';
// }


// function spid_upgrade1_069()
// {
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_reponses_standard','state_id',array(
		// 'type' => 'int',
		// 'precision' => '11',
		// 'default' => 'NULL'
	// ));

	// return $GLOBALS['setup_info']['spid']['currentver'] = '1.070';
// }


// function spid_upgrade1_070()
// {
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_reponses_standard','state_id',array(
		// 'type' => 'int',
		// 'precision' => '11',
		// 'default' => '0'
	// ));

	// return $GLOBALS['setup_info']['spid']['currentver'] = '1.071';
// }


// function spid_upgrade1_071()
// {
	// $GLOBALS['egw_setup']->oProc->CreateTable('spid_locations',array(
		// 'fd' => array(
			// 'location_id' => array('type' => 'auto','nullable' => False),
			// 'location_parent' => array('type' => 'int','precision' => '4','nullable' => False,'default' => '0'),
			// 'location_name' => array('type' => 'varchar','precision' => '150','default' => 'NULL'),
			// 'location_description' => array('type' => 'varchar','precision' => '255','default' => 'NULL'),
			// 'location_data' => array('type' => 'text','default' => 'NULL'),
			// 'creator_id' => array('type' => 'int','precision' => '11','default' => '0'),
			// 'creation_date' => array('type' => 'int','precision' => '20','default' => '0'),
			// 'change_date' => array('type' => 'int','precision' => '20','default' => '0')
		// ),
		// 'pk' => array('location_id'),
		// 'fk' => array(),
		// 'ix' => array(),
		// 'uc' => array()
	// ));

	// return $GLOBALS['setup_info']['spid']['currentver'] = '1.072';
// }


// function spid_upgrade1_072()
// {
	// $GLOBALS['egw_setup']->oProc->AddColumn('spid_locations','location_level',array(
		// 'type' => 'int',
		// 'precision' => '4',
		// 'default' => '0'
	// ));

	// return $GLOBALS['setup_info']['spid']['currentver'] = '1.073';
// }


// function spid_upgrade1_073()
// {
	// $GLOBALS['egw_setup']->oProc->AddColumn('spid_tickets','location_id',array(
		// 'type' => 'int',
		// 'precision' => '11',
		// 'default' => '0'
	// ));
	// $GLOBALS['egw_setup']->oProc->AddColumn('spid_tickets','location_precision',array(
		// 'type' => 'varchar',
		// 'precision' => '255',
		// 'default' => 'NULL'
	// ));

	// return $GLOBALS['setup_info']['spid']['currentver'] = '1.074';
// }


// function spid_upgrade1_074()
// {
	// $GLOBALS['egw_setup']->oProc->AddColumn('spid_clients','client_footer_one',array(
		// 'type' => 'text',
		// 'default' => 'NULL'
	// ));
	// $GLOBALS['egw_setup']->oProc->AddColumn('spid_clients','client_footer_two',array(
		// 'type' => 'text',
		// 'default' => 'NULL'
	// ));

	// return $GLOBALS['setup_info']['spid']['currentver'] = '1.075';
// }


// function spid_upgrade1_075()
// {
	// $GLOBALS['egw_setup']->oProc->AddColumn('spid_etats','label_traduction',array(
		// 'type' => 'varchar',
		// 'precision' => '255',
		// 'default' => 'NULL'
	// ));

	// return $GLOBALS['setup_info']['spid']['currentver'] = '1.076';
// }


// function spid_upgrade1_076()
// {
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_tickets','creation_date',array(
		// 'type' => 'int',
		// 'precision' => '20',
		// 'nullable' => False,
		// 'default' => '0'
	// ));

	// return $GLOBALS['setup_info']['spid']['currentver'] = '1.077';
// }


// function spid_upgrade1_077()
// {
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_clients','creator_id',array(
		// 'type' => 'int',
		// 'precision' => '4',
		// 'nullable' => False,
		// 'default' => '0'
	// ));

	// return $GLOBALS['setup_info']['spid']['currentver'] = '1.078';
// }


// function spid_upgrade1_078()
// {
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_clients','creation_date',array(
		// 'type' => 'int',
		// 'precision' => '20',
		// 'nullable' => False,
		// 'default' => '0'
	// ));
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_clients','change_date',array(
		// 'type' => 'int',
		// 'precision' => '20',
		// 'nullable' => False,
		// 'default' => '0'
	// ));

	// return $GLOBALS['setup_info']['spid']['currentver'] = '1.079';
// }


// function spid_upgrade1_079()
// {
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_etats','state_initial',array(
		// 'type' => 'int',
		// 'precision' => '4',
		// 'nullable' => False,
		// 'default' => '0'
	// ));

	// return $GLOBALS['setup_info']['spid']['currentver'] = '1.080';
// }


// function spid_upgrade1_080()
// {
	// $GLOBALS['egw_setup']->oProc->AddColumn('spid_tickets','ticket_private',array(
		// 'type' => 'int',
		// 'precision' => '1',
		// 'nullable' => False,
		// 'default' => '0'
	// ));

	// return $GLOBALS['setup_info']['spid']['currentver'] = '1.081';
// }


// function spid_upgrade1_081()
// {
	// $GLOBALS['egw_setup']->oProc->RefreshTable('spid_factures',array(
		// 'fd' => array(
			// 'facture_id' => array('type' => 'auto','nullable' => False),
			// 'client_id' => array('type' => 'int','precision' => '11','nullable' => False),
			// 'creator_id' => array('type' => 'int','precision' => '11','nullable' => False),
			// 'facture_number' => array('type' => 'varchar','precision' => '11','default' => 'NULL'),
			// 'total_ht' => array('type' => 'decimal','precision' => '9','scale' => '2','default' => '0.00'),
			// 'nb_open_start' => array('type' => 'int','precision' => '11','default' => '0'),
			// 'nb_open_during' => array('type' => 'int','precision' => '11','default' => '0'),
			// 'nb_close_during' => array('type' => 'int','precision' => '11','default' => '0'),
			// 'nb_open_end' => array('type' => 'int','precision' => '11','default' => '0'),
			// 'creation_date' => array('type' => 'int','precision' => '20','nullable' => False),
			// 'change_date' => array('type' => 'int','precision' => '20','default' => 'NULL'),
			// 'send_date' => array('type' => 'int','precision' => '20','default' => 'NULL'),
			// 'validation_date' => array('type' => 'int','precision' => '20','default' => 'NULL'),
			// 'start_period_date' => array('type' => 'int','precision' => '20','default' => 'NULL'),
			// 'end_period_date' => array('type' => 'int','precision' => '20','default' => 'NULL'),
			// 'account_id' => array('type' => 'int','precision' => '11','nullable' => False),
			// 'generated_pdf' => array('type' => 'int','precision' => '2','default' => '0'),
			// 'invoice_validate' => array('type' => 'int','precision' => '2','default' => '0')
		// ),
		// 'pk' => array('facture_id'),
		// 'fk' => array(),
		// 'ix' => array(),
		// 'uc' => array('facture_number')
	// ));

	// return $GLOBALS['setup_info']['spid']['currentver'] = '1.082';
// }


// function spid_upgrade1_082()
// {
	// $GLOBALS['egw_setup']->oProc->AddColumn('spid_factures','message',array(
		// 'type' => 'text',
		// 'default' => 'NULL'
	// ));
	// $GLOBALS['egw_setup']->oProc->AddColumn('spid_factures','alone_invoice',array(
		// 'type' => 'int',
		// 'precision' => '4',
		// 'nullable' => False,
		// 'default' => '0'
	// ));

	// return $GLOBALS['setup_info']['spid']['currentver'] = '1.083';
// }


// function spid_upgrade1_083()
// {
	// $GLOBALS['egw_setup']->oProc->RenameColumn('spid_factures','message','invoice_message');

	// return $GLOBALS['setup_info']['spid']['currentver'] = '1.084';
// }


// function spid_upgrade1_084()
// {
	// $GLOBALS['egw_setup']->oProc->CreateTable('spid_url',array(
		// 'fd' => array(
			// 'url_id' => array('type' => 'auto','nullable' => False),
			// 'ticket_id' => array('type' => 'int','precision' => '11','nullable' => False),
			// 'url_links' => array('type' => 'varchar','precision' => '500','nullable' => False),
			// 'url_commentaires' => array('type' => 'varchar','precision' => '255','default' => 'NULL')
		// ),
		// 'pk' => array('url_id'),
		// 'fk' => array('ticket_id' => 'spid_tickets.ticket_id'),
		// 'ix' => array(),
		// 'uc' => array(array('ticket_id','url_links'))
	// ));

	// return $GLOBALS['setup_info']['spid']['currentver'] = '1.085';
// }


// function spid_upgrade1_085()
// {
	// $GLOBALS['egw_setup']->oProc->AddColumn('spid_url','creator_id',array(
		// 'type' => 'int',
		// 'precision' => '11',
		// 'nullable' => False
	// ));
	// $GLOBALS['egw_setup']->oProc->AddColumn('spid_url','creation_date',array(
		// 'type' => 'int',
		// 'precision' => '20',
		// 'nullable' => False
	// ));

	// return $GLOBALS['setup_info']['spid']['currentver'] = '1.086';
// }


// function spid_upgrade1_086()
// {
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_reponses','reply_content',array(
		// 'type' => 'text',
		// 'default' => 'NULL'
	// ));
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_reponses','actions',array(
		// 'type' => 'varchar',
		// 'precision' => '100',
		// 'default' => 'NULL'
	// ));
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_reponses','old_value',array(
		// 'type' => 'varchar',
		// 'precision' => '100',
		// 'default' => 'NULL'
	// ));
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_reponses','new_value',array(
		// 'type' => 'varchar',
		// 'precision' => '100',
		// 'default' => 'NULL'
	// ));

	// return $GLOBALS['setup_info']['spid']['currentver'] = '1.087';
// }


// function spid_upgrade1_087()
// {
	// $GLOBALS['egw_setup']->oProc->AddColumn('spid_clients','client_manager_email',array(
		// 'type' => 'varchar',
		// 'precision' => '150',
		// 'default' => 'NULL'
	// ));

	// return $GLOBALS['setup_info']['spid']['currentver'] = '1.088';
// }


// function spid_upgrade1_088()
// {
	// $GLOBALS['egw_setup']->oProc->RefreshTable('spid_url',array(
		// 'fd' => array(
			// 'url_id' => array('type' => 'auto','nullable' => False),
			// 'ticket_id' => array('type' => 'int','precision' => '11','nullable' => False),
			// 'url_links' => array('type' => 'varchar','precision' => '500','nullable' => False),
			// 'url_commentaires' => array('type' => 'varchar','precision' => '255','default' => 'NULL'),
			// 'creator_id' => array('type' => 'int','precision' => '11','nullable' => False),
			// 'creation_date' => array('type' => 'int','precision' => '20','nullable' => False)
		// ),
		// 'pk' => array('url_id'),
		// 'fk' => array('ticket_id' => 'spid_tickets.ticket_id'),
		// 'ix' => array(),
		// 'uc' => array()
	// ));

	// return $GLOBALS['setup_info']['spid']['currentver'] = '1.089';
// }


// function spid_upgrade1_089()
// {
	// $GLOBALS['egw_setup']->oProc->CreateTable('spid_clients_relations',array(
		// 'fd' => array(
			// 'id' => array('type' => 'auto','nullable' => False),
			// 'societe_id' => array('type' => 'int','precision' => '11','nullable' => False),
			// 'client_id' => array('type' => 'int','precision' => '11','nullable' => False)
		// ),
		// 'pk' => array('id'),
		// 'fk' => array(),
		// 'ix' => array(),
		// 'uc' => array()
	// ));

	// return $GLOBALS['setup_info']['spid']['currentver'] = '1.090';
// }


// function spid_upgrade1_090()
// {
	// $GLOBALS['egw_setup']->oProc->CreateTable('spid_tickets_view',array(
		// 'fd' => array(
			// 'view_id' => array('type' => 'auto','nullable' => False),
			// 'ticket_id' => array('type' => 'int','precision' => '11','nullable' => False),
			// 'account_id' => array('type' => 'int','precision' => '11','nullable' => False),
			// 'time' => array('type' => 'int','precision' => '20','nullable' => False)
		// ),
		// 'pk' => array('view_id'),
		// 'fk' => array(),
		// 'ix' => array(),
		// 'uc' => array()
	// ));

	// return $GLOBALS['setup_info']['spid']['currentver'] = '1.091';
// }


// function spid_upgrade1_091()
// {
	// $GLOBALS['egw_setup']->oProc->AddColumn('spid_clients_relations','payment_model',array(
		// 'type' => 'int',
		// 'precision' => '4',
		// 'nullable' => False
	// ));
	// $GLOBALS['egw_setup']->oProc->AddColumn('spid_clients_relations','operation_code',array(
		// 'type' => 'varchar',
		// 'precision' => '30',
		// 'nullable' => False
	// ));

	// return $GLOBALS['setup_info']['spid']['currentver'] = '1.092';
// }


// function spid_upgrade1_092()
// {
	// $GLOBALS['egw_setup']->oProc->AddColumn('spid_clients','maj_id',array(
		// 'type' => 'int',
		// 'precision' => '4',
		// 'default' => '0'
	// ));

	// return $GLOBALS['setup_info']['spid']['currentver'] = '1.093';
// }


// function spid_upgrade1_093()
// {
	// $GLOBALS['egw_setup']->oProc->AddColumn('spid_clients','client_sleep',array(
		// 'type' => 'int',
		// 'precision' => '1',
		// 'nullable' => False,
		// 'default' => '0'
	// ));

	// return $GLOBALS['setup_info']['spid']['currentver'] = '1.094';
// }


// function spid_upgrade1_094()
// {
	// $GLOBALS['egw_setup']->oProc->AddColumn('spid_factures','societe_id',array(
		// 'type' => 'int',
		// 'precision' => '11',
		// 'nullable' => False
	// ));

	// return $GLOBALS['setup_info']['spid']['currentver'] = '1.095';
// }

// function spid_upgrade1_095()
// {
	// return $GLOBALS['setup_info']['spid']['currentver'] = '1.096';
// }
// function spid_upgrade1_096()
// {
	// $GLOBALS['egw_setup']->oProc->RenameColumn('spid_clients_relations','id','relation_id');
	// $GLOBALS['egw_setup']->oProc->RefreshTable('spid_clients_relations',array(
		// 'fd' => array(
			// 'relation_id' => array('type' => 'auto','nullable' => False),
			// 'societe_id' => array('type' => 'int','precision' => '11','nullable' => False),
			// 'client_id' => array('type' => 'int','precision' => '11','nullable' => False),
			// 'payment_model' => array('type' => 'int','precision' => '4','nullable' => False),
			// 'operation_code' => array('type' => 'varchar','precision' => '30','nullable' => False)
		// ),
		// 'pk' => array('relation_id'),
		// 'fk' => array(),
		// 'ix' => array(),
		// 'uc' => array()
	// ));

	// return $GLOBALS['setup_info']['spid']['currentver'] = '1.097';
// }

// function spid_upgrade1_097()
// {
	// return $GLOBALS['setup_info']['spid']['currentver'] = '1.1.002';
// }

// function spid_upgrade1_1_002()
// {
	// return $GLOBALS['setup_info']['spid']['currentver'] = '1.1.003';
// }
// function spid_upgrade1_1_003()
// {
	// return $GLOBALS['setup_info']['spid']['currentver'] = '1.1.004';
// }


// function spid_upgrade1_1_004()
// {
	// $GLOBALS['egw_setup']->oProc->CreateTable('spid_rendez_vous',array(
		// 'fd' => array(
			// 'ticket_id' => array('type' => 'int','precision' => '4','nullable' => False),
			// 'cal_id' => array('type' => 'int','precision' => '4','nullable' => False),
			// 'creation_date' => array('type' => 'int','precision' => '4'),
			// 'change_date' => array('type' => 'int','precision' => '4'),
			// 'createur_id' => array('type' => 'int','precision' => '4'),
			// 'maj_id' => array('type' => 'int','precision' => '4'),
			// 'account_id' => array('type' => 'varchar','precision' => '255')
		// ),
		// 'pk' => array('ticket_id','cal_id'),
		// 'fk' => array('ticket_id' => 'spid_tickets','cal_id' => 'egw_cal'),
		// 'ix' => array(),
		// 'uc' => array()
	// ));

	// return $GLOBALS['setup_info']['spid']['currentver'] = '1.1.005';
// }


// function spid_upgrade1_1_005()
// {
	// $GLOBALS['egw_setup']->oProc->AddColumn('spid_factures','invoice_send',array(
		// 'type' => 'int',
		// 'precision' => '2',
		// 'default' => '0'
	// ));

	// return $GLOBALS['setup_info']['spid']['currentver'] = '1.1.006';
// }


// function spid_upgrade1_1_006()
// {
	// $GLOBALS['egw_setup']->oProc->CreateTable('spid_contrats',array(
		// 'fd' => array(
			// 'contract_id' => array('type' => 'auto','nullable' => False),
			// 'relation_id' => array('type' => 'int','precision' => '4')
		// ),
		// 'pk' => array('contract_id'),
		// 'fk' => array(),
		// 'ix' => array(),
		// 'uc' => array()
	// ));

	// return $GLOBALS['setup_info']['spid']['currentver'] = '1.1.007';
// }


// function spid_upgrade1_1_007()
// {
	// /* done by RefreshTable() anyway
	// $GLOBALS['egw_setup']->oProc->AddColumn('spid_contrats','type_id',array(
		// 'type' => 'int',
		// 'precision' => '4'
	// ));*/
	// /* done by RefreshTable() anyway
	// $GLOBALS['egw_setup']->oProc->AddColumn('spid_contrats','date_signature',array(
		// 'type' => 'int',
		// 'precision' => '20'
	// ));*/
	// /* done by RefreshTable() anyway
	// $GLOBALS['egw_setup']->oProc->AddColumn('spid_contrats','date_end',array(
		// 'type' => 'int',
		// 'precision' => '20'
	// ));*/
	// /* done by RefreshTable() anyway
	// $GLOBALS['egw_setup']->oProc->AddColumn('spid_contrats','date_last_invoice',array(
		// 'type' => 'int',
		// 'precision' => '20'
	// ));*/
	// /* done by RefreshTable() anyway
	// $GLOBALS['egw_setup']->oProc->AddColumn('spid_contrats','contract_period',array(
		// 'type' => 'varchar',
		// 'precision' => '30'
	// ));*/
	// /* done by RefreshTable() anyway
	// $GLOBALS['egw_setup']->oProc->AddColumn('spid_contrats','contract_path',array(
		// 'type' => 'varchar',
		// 'precision' => '200'
	// ));*/
	// /* done by RefreshTable() anyway
	// $GLOBALS['egw_setup']->oProc->AddColumn('spid_contrats','contract_actions',array(
		// 'type' => 'longtext'
	// ));*/
	// /* done by RefreshTable() anyway
	// $GLOBALS['egw_setup']->oProc->AddColumn('spid_contrats','contract_conditions',array(
		// 'type' => 'longtext'
	// ));*/
	// /* done by RefreshTable() anyway
	// $GLOBALS['egw_setup']->oProc->AddColumn('spid_contrats','contract_conditions_hardware',array(
		// 'type' => 'longtext'
	// ));*/
	// /* done by RefreshTable() anyway
	// $GLOBALS['egw_setup']->oProc->AddColumn('spid_contrats','comment',array(
		// 'type' => 'longtext'
	// ));*/
	// /* done by RefreshTable() anyway
	// $GLOBALS['egw_setup']->oProc->AddColumn('spid_contrats','creation_date',array(
		// 'type' => 'int',
		// 'precision' => '20'
	// ));*/
	// /* done by RefreshTable() anyway
	// $GLOBALS['egw_setup']->oProc->AddColumn('spid_contrats','change_date',array(
		// 'type' => 'int',
		// 'precision' => '20'
	// ));*/
	// /* done by RefreshTable() anyway
	// $GLOBALS['egw_setup']->oProc->AddColumn('spid_contrats','creator_id',array(
		// 'type' => 'int',
		// 'precision' => '4'
	// ));*/
	// /* done by RefreshTable() anyway
	// $GLOBALS['egw_setup']->oProc->AddColumn('spid_contrats','change_id',array(
		// 'type' => 'int',
		// 'precision' => '4'
	// ));*/
	// $GLOBALS['egw_setup']->oProc->RefreshTable('spid_contrats',array(
		// 'fd' => array(
			// 'contract_id' => array('type' => 'auto','nullable' => False),
			// 'relation_id' => array('type' => 'int','precision' => '4'),
			// 'type_id' => array('type' => 'int','precision' => '4'),
			// 'date_signature' => array('type' => 'int','precision' => '20'),
			// 'date_renewal' => array('type' => 'int','precision' => '20'),
			// 'date_end' => array('type' => 'int','precision' => '20'),
			// 'date_last_invoice' => array('type' => 'int','precision' => '20'),
			// 'contract_period' => array('type' => 'varchar','precision' => '30'),
			// 'contract_path' => array('type' => 'varchar','precision' => '200'),
			// 'contract_amount' => array('type' => 'int','precision' => '20'),
			// 'contract_actions' => array('type' => 'longtext'),
			// 'contract_conditions' => array('type' => 'longtext'),
			// 'contract_conditions_hardware' => array('type' => 'longtext'),
			// 'comment' => array('type' => 'longtext'),
			// 'creation_date' => array('type' => 'int','precision' => '20'),
			// 'change_date' => array('type' => 'int','precision' => '20'),
			// 'creator_id' => array('type' => 'int','precision' => '4'),
			// 'change_id' => array('type' => 'int','precision' => '4')
		// ),
		// 'pk' => array('contract_id'),
		// 'fk' => array('relation_id' => 'spid_clients_relations','type_id' => 'spid_contrats_type'),
		// 'ix' => array(),
		// 'uc' => array()
	// ));

	// return $GLOBALS['setup_info']['spid']['currentver'] = '1.1.008';
// }


// function spid_upgrade1_1_008()
// {
	// $GLOBALS['egw_setup']->oProc->CreateTable('spid_contrats_type',array(
		// 'fd' => array(
			// 'type_id' => array('type' => 'auto','nullable' => False),
			// 'type_label' => array('type' => 'varchar','precision' => '255'),
			// 'type_description' => array('type' => 'varchar','precision' => '255'),
			// 'creation_date' => array('type' => 'int','precision' => '20'),
			// 'change_date' => array('type' => 'int','precision' => '20'),
			// 'creator_id' => array('type' => 'int','precision' => '4'),
			// 'change_id' => array('type' => 'int','precision' => '4')
		// ),
		// 'pk' => array('type_id'),
		// 'fk' => array(),
		// 'ix' => array(),
		// 'uc' => array()
	// ));

	// return $GLOBALS['setup_info']['spid']['currentver'] = '1.1.009';
// }


// function spid_upgrade1_1_009()
// {
	// return $GLOBALS['setup_info']['spid']['currentver'] = '1.1.010';
// }


// function spid_upgrade1_1_010()
// {
	// return $GLOBALS['setup_info']['spid']['currentver'] = '1.1.011';
// }


// function spid_upgrade1_1_011()
// {
	// return $GLOBALS['setup_info']['spid']['currentver'] = '1.1.012';
// }


// function spid_upgrade1_1_012()
// {
	// return $GLOBALS['setup_info']['spid']['currentver'] = '1.1.013';
// }


// function spid_upgrade1_1_013()
// {
	// return $GLOBALS['setup_info']['spid']['currentver'] = '1.1.014';
// }


// function spid_upgrade1_1_014()
// {
	// $GLOBALS['egw_setup']->oProc->AddColumn('spid_etats','state_price',array(
		// 'type' => 'int',
		// 'precision' => '4',
		// 'default' => 'NULL'
	// ));

	// return $GLOBALS['setup_info']['spid']['currentver'] = '1.1.015';
// }


// function spid_upgrade1_1_015()
// {
	// $GLOBALS['egw_setup']->oProc->CreateTable('spid_intervenants',array(
		// 'fd' => array(
			// 'intervenant_id' => array('type' => 'int','precision' => '4'),
			// 'intervenant_coef' => array('type' => 'int','precision' => '4'),
			// 'intervenant_obj_bas' => array('type' => 'int','precision' => '4'),
			// 'intervenant_obj_haut' => array('type' => 'int','precision' => '4'),
			// 'intervenant_TJM' => array('type' => 'int','precision' => '4'),
			// 'intervenant_PJM' => array('type' => 'int','precision' => '4'),
			// 'intervenant_note' => array('type' => 'varchar','precision' => '255'),
			// 'creation_date' => array('type' => 'int','precision' => '20'),
			// 'change_date' => array('type' => 'int','precision' => '20'),
			// 'creator_id' => array('type' => 'int','precision' => '4'),
			// 'change_id' => array('type' => 'int','precision' => '4')
		// ),
		// 'pk' => array(),
		// 'fk' => array(),
		// 'ix' => array(),
		// 'uc' => array()
	// ));

	// return $GLOBALS['setup_info']['spid']['currentver'] = '1.1.016';
// }


// function spid_upgrade1_1_016()
// {
	// $GLOBALS['egw_setup']->oProc->RefreshTable('spid_intervenants',array(
		// 'fd' => array(
			// 'intervenant_id' => array('type' => 'int','precision' => '4'),
			// 'intervenant_coef' => array('type' => 'int','precision' => '4'),
			// 'intervenant_obj_bas' => array('type' => 'int','precision' => '4'),
			// 'intervenant_obj_haut' => array('type' => 'int','precision' => '4'),
			// 'intervenant_TJM' => array('type' => 'int','precision' => '4'),
			// 'intervenant_PJM' => array('type' => 'int','precision' => '4'),
			// 'intervenant_note' => array('type' => 'varchar','precision' => '255'),
			// 'creation_date' => array('type' => 'int','precision' => '20'),
			// 'change_date' => array('type' => 'int','precision' => '20'),
			// 'creator_id' => array('type' => 'int','precision' => '4'),
			// 'change_id' => array('type' => 'int','precision' => '4')
		// ),
		// 'pk' => array('intervenant_id'),
		// 'fk' => array(),
		// 'ix' => array(),
		// 'uc' => array()
	// ));

	// return $GLOBALS['setup_info']['spid']['currentver'] = '1.1.017';
// }


// function spid_upgrade1_1_017()
// {
	// $GLOBALS['egw_setup']->oProc->AddColumn('spid_tickets','ticket_budget',array(
		// 'type' => 'int',
		// 'precision' => '4',
		// 'default' => '0'
	// ));

	// return $GLOBALS['setup_info']['spid']['currentver'] = '1.1.018';
// }


// function spid_upgrade1_1_018()
// {
	// $GLOBALS['egw_setup']->oProc->RenameColumn('spid_intervenants','intervenant_obj_bas','intervenant_obj_ca');
	// $GLOBALS['egw_setup']->oProc->RenameColumn('spid_intervenants','intervenant_obj_haut','intervenant_obj_ration');

	// return $GLOBALS['setup_info']['spid']['currentver'] = '1.1.019';
// }


// function spid_upgrade1_1_019()
// {
	// $GLOBALS['egw_setup']->oProc->RenameColumn('spid_intervenants','intervenant_obj_ration','intervenant_obj_ratio');

	// return $GLOBALS['setup_info']['spid']['currentver'] = '1.1.020';
// }


// function spid_upgrade1_1_020()
// {
	// $GLOBALS['egw_setup']->oProc->AddColumn('spid_factures','modifier_id',array(
		// 'type' => 'int',
		// 'precision' => '11',
		// 'default' => '0'
	// ));

	// return $GLOBALS['setup_info']['spid']['currentver'] = '1.1.021';
// }


// function spid_upgrade1_1_021()
// {
	// $GLOBALS['egw_setup']->oProc->CreateTable('spid_sectors',array(
		// 'fd' => array(
			// 'sector_id' => array('type' => 'auto','nullable' => False),
			// 'sector_name' => array('type' => 'varchar','precision' => '255','nullable' => False),
			// 'creator_id' => array('type' => 'int','precision' => '4','nullable' => False,'default' => '0'),
			// 'creation_date' => array('type' => 'int','precision' => '20','nullable' => False,'default' => '0'),
			// 'change_date' => array('type' => 'int','precision' => '20','default' => '0'),
			// 'change_id' => array('type' => 'int','precision' => '4','default' => '0'),
		// 'pk' => array('sector_id'),
		// 'fk' => array(),
		// 'ix' => array(),
		// 'uc' => array()
	// ));

	// return $GLOBALS['setup_info']['spid']['currentver'] = '1.1.022';
// }


// function spid_upgrade1_1_022()
// {
	// $GLOBALS['egw_setup']->oProc->AddColumn('spid_clients','client_sector',array(
		// 'type' => 'int',
		// 'precision' => '4',
		// 'default' => 'NULL'
	// ));

	// return $GLOBALS['setup_info']['spid']['currentver'] = '1.1.023';
// }


// function spid_upgrade1_1_023()
// {
	// return $GLOBALS['setup_info']['spid']['currentver'] = '1.1.024';
// }


// function spid_upgrade1_1_024()
// {
	// $GLOBALS['egw_setup']->oProc->AddColumn('spid_clients','client_code_tiers',array(
		// 'type' => 'varchar',
		// 'precision' => '255'
	// ));

	// return $GLOBALS['setup_info']['spid']['currentver'] = '1.1.025';
// }


// function spid_upgrade1_1_025()
// {
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_tickets','ticket_spend_time',array(
		// 'type' => 'float',
		// 'precision' => '11',
		// 'default' => '0'
	// ));

	// return $GLOBALS['setup_info']['spid']['currentver'] = '1.1.026';
// }


// function spid_upgrade1_1_026()
// {
	// $GLOBALS['egw_setup']->oProc->AddColumn('spid_tickets','contract_id',array(
		// 'type' => 'int',
		// 'precision' => '4'
	// ));

	// return $GLOBALS['setup_info']['spid']['currentver'] = '1.1.027';
// }


// function spid_upgrade1_1_027()
// {
	// $GLOBALS['egw_setup']->oProc->AddColumn('spid_tickets','ticket_unit_time',array(
		// 'type' => 'int',
		// 'precision' => '4'
	// ));

	// return $GLOBALS['setup_info']['spid']['currentver'] = '1.1.028';
// }


// function spid_upgrade1_1_028()
// {
	// $GLOBALS['egw_setup']->oProc->RefreshTable('spid_prix_parametres',array(
		// 'fd' => array(
			// 'price_id' => array('type' => 'auto','nullable' => False),
			// 'client_id' => array('type' => 'int','precision' => '11','nullable' => False),
			// 'state_id' => array('type' => 'int','precision' => '11','nullable' => False),
			// 'creator_id' => array('type' => 'int','precision' => '11','nullable' => False),
			// 'price_ht' => array('type' => 'decimal','precision' => '8','scale' => '2','default' => '0.00'),
			// 'ticket_spend_time' => array('type' => 'int','precision' => '11','default' => '0'),
			// 'creation_date' => array('type' => 'int','precision' => '20','nullable' => False),
			// 'change_date' => array('type' => 'int','precision' => '20','default' => '0'),
			// 'account_id' => array('type' => 'int','precision' => '11','nullable' => False)
		// ),
		// 'pk' => array('price_id','client_id','state_id'),
		// 'fk' => array(),
		// 'ix' => array(),
		// 'uc' => array()
	// ));

	// return $GLOBALS['setup_info']['spid']['currentver'] = '1.1.029';
// }

// function spid_upgrade1_1_029()
// {
	// return $GLOBALS['setup_info']['spid']['currentver'] = '1.1.030';
// }
// function spid_upgrade1_1_030()
// {
	// $GLOBALS['egw_setup']->oProc->DropColumn('spid_prix_parametres',array(
		// 'fd' => array(
			// 'client_id' => array('type' => 'int','precision' => '11','nullable' => False),
			// 'state_id' => array('type' => 'int','precision' => '11','nullable' => False),
			// 'creator_id' => array('type' => 'int','precision' => '11','nullable' => False),
			// 'price_ht' => array('type' => 'decimal','precision' => '8','scale' => '2','default' => '0.00'),
			// 'ticket_spend_time' => array('type' => 'int','precision' => '11','default' => '0'),
			// 'creation_date' => array('type' => 'int','precision' => '20','nullable' => False),
			// 'change_date' => array('type' => 'int','precision' => '20','default' => '0'),
			// 'account_id' => array('type' => 'int','precision' => '11','nullable' => False)
		// ),
		// 'pk' => array('client_id','state_id'),
		// 'fk' => array(),
		// 'ix' => array(),
		// 'uc' => array()
	// ),'price_id');
	// $GLOBALS['egw_setup']->oProc->RefreshTable('spid_prix_parametres',array(
		// 'fd' => array(
			// 'client_id' => array('type' => 'int','precision' => '11','nullable' => False),
			// 'state_id' => array('type' => 'int','precision' => '11','nullable' => False),
			// 'creator_id' => array('type' => 'int','precision' => '11','nullable' => False),
			// 'price_ht' => array('type' => 'decimal','precision' => '8','scale' => '2','default' => '0.00'),
			// 'ticket_spend_time' => array('type' => 'int','precision' => '11','default' => '0'),
			// 'creation_date' => array('type' => 'int','precision' => '20','nullable' => False),
			// 'change_date' => array('type' => 'int','precision' => '20','default' => '0'),
			// 'account_id' => array('type' => 'int','precision' => '11','nullable' => False)
		// ),
		// 'pk' => array('client_id','state_id'),
		// 'fk' => array(),
		// 'ix' => array(),
		// 'uc' => array()
	// ));

	// return $GLOBALS['setup_info']['spid']['currentver'] = '1.1.031';
// }


// function spid_upgrade1_1_031()
// {
	// /* done by RefreshTable() anyway
	// $GLOBALS['egw_setup']->oProc->AddColumn('spid_prix_parametres','price_id',array(
		// 'type' => 'auto',
		// 'nullable' => False
	// ));*/
	// $GLOBALS['egw_setup']->oProc->RefreshTable('spid_prix_parametres',array(
		// 'fd' => array(
			// 'client_id' => array('type' => 'int','precision' => '11','nullable' => False),
			// 'state_id' => array('type' => 'int','precision' => '11','nullable' => False),
			// 'creator_id' => array('type' => 'int','precision' => '11','nullable' => False),
			// 'price_ht' => array('type' => 'decimal','precision' => '8','scale' => '2','default' => '0.00'),
			// 'ticket_spend_time' => array('type' => 'int','precision' => '11','default' => '0'),
			// 'creation_date' => array('type' => 'int','precision' => '20','nullable' => False),
			// 'change_date' => array('type' => 'int','precision' => '20','default' => '0'),
			// 'account_id' => array('type' => 'int','precision' => '11','nullable' => False),
			// 'price_id' => array('type' => 'auto','nullable' => False)
		// ),
		// 'pk' => array('client_id','state_id','price_id'),
		// 'fk' => array(),
		// 'ix' => array(),
		// 'uc' => array()
	// ));

	// return $GLOBALS['setup_info']['spid']['currentver'] = '1.1.032';
// }


// function spid_upgrade1_1_032()
// {
	// $GLOBALS['egw_setup']->oProc->AddColumn('spid_tickets','ticket_nb_student',array(
		// 'type' => 'int',
		// 'precision' => '11',
		// 'default' => 'NULL'
	// ));
	// $GLOBALS['egw_setup']->oProc->AddColumn('spid_tickets','ticket_price_student',array(
		// 'type' => 'int',
		// 'precision' => '11',
		// 'default' => 'NULL'
	// ));

	// return $GLOBALS['setup_info']['spid']['currentver'] = '1.1.033';
// }


// function spid_upgrade1_1_033()
// {
	// $GLOBALS['egw_setup']->oProc->CreateTable('spid_facture_categories',array(
		// 'fd' => array(
			// 'cat_id' => array('type' => 'auto','nullable' => False),
			// 'cat_name' => array('type' => 'varchar','precision' => '255'),
			// 'cat_label' => array('type' => 'varchar','precision' => '255'),
			// 'cat_active' => array('type' => 'bool'),
			// 'cat_default_price' => array('type' => 'decimal'),
			// 'creator_id' => array('type' => 'int','precision' => '4'),
			// 'creation_date' => array('type' => 'int','precision' => '20'),
			// 'modifier_id' => array('type' => 'int','precision' => '4'),
			// 'change_date' => array('type' => 'int','precision' => '20')
		// ),
		// 'pk' => array('cat_id'),
		// 'fk' => array(),
		// 'ix' => array(),
		// 'uc' => array()
	// ));

	// return $GLOBALS['setup_info']['spid']['currentver'] = '1.1.034';
// }


// function spid_upgrade1_1_034()
// {
	// $GLOBALS['egw_setup']->oProc->AddColumn('spid_factures','facture_tva',array(
		// 'type' => 'bool'
	// ));
	// $GLOBALS['egw_setup']->oProc->AddColumn('spid_factures','facture_taux_tva',array(
		// 'type' => 'decimal'
	// ));

	// return $GLOBALS['setup_info']['spid']['currentver'] = '1.1.035';
// }


// function spid_upgrade1_1_035()
// {
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_factures','facture_taux_tva',array(
		// 'type' => 'decimal',
		// 'precision' => '9',
		// 'scale' => '2'
	// ));

	// return $GLOBALS['setup_info']['spid']['currentver'] = '1.1.036';
// }


// function spid_upgrade1_1_036()
// {
	// $GLOBALS['egw_setup']->oProc->AlterColumn('spid_facture_categories','cat_default_price',array(
		// 'type' => 'decimal',
		// 'precision' => '9',
		// 'scale' => '2'
	// ));

	// return $GLOBALS['setup_info']['spid']['currentver'] = '1.1.037';
// }


// function spid_upgrade1_1_037()
// {
	// $GLOBALS['egw_setup']->oProc->AddColumn('spid_factures_details','extra_cat_id',array(
		// 'type' => 'int',
		// 'precision' => '11'
	// ));
	// $GLOBALS['egw_setup']->oProc->AddColumn('spid_factures_details','extra_label',array(
		// 'type' => 'varchar',
		// 'precision' => '255'
	// ));
	// $GLOBALS['egw_setup']->oProc->AddColumn('spid_factures_details','extra_ht',array(
		// 'type' => 'decimal',
		// 'precision' => '9',
		// 'scale' => '2'
	// ));

	// return $GLOBALS['setup_info']['spid']['currentver'] = '1.1.038';
// }


// function spid_upgrade1_1_038()
// {
	// $GLOBALS['egw_setup']->oProc->AddColumn('spid_factures_details','extra_rank',array(
		// 'type' => 'int',
		// 'precision' => '11'
	// ));

	// return $GLOBALS['setup_info']['spid']['currentver'] = '1.1.039';
// }


// function spid_upgrade1_1_039()
// {
	// $GLOBALS['egw_setup']->oProc->AddColumn('spid_factures','payment_date',array(
		// 'type' => 'int',
		// 'precision' => '20'
	// ));

	// return $GLOBALS['setup_info']['spid']['currentver'] = '1.1.040';
// }


function spid_upgrade1_1_040()
{
	$GLOBALS['egw_setup']->oProc->AddColumn('spid_factures','payment_bank',array(
		'type' => 'varchar',
		'precision' => '50'
	));
	$GLOBALS['egw_setup']->oProc->AddColumn('spid_factures','payment_amount',array(
		'type' => 'decimal',
		'precision' => '9',
		'scale' => '2'
	));

	return $GLOBALS['setup_info']['spid']['currentver'] = '1.1.041';
}


function spid_upgrade1_1_041()
{
	$GLOBALS['egw_setup']->oProc->AddColumn('spid_factures','invoice_payed',array(
		'type' => 'bool',
		'default' => '0'
	));
	
	$GLOBALS['egw_setup']->oProc->RefreshTable('spid_prix_parametres',array(
		'fd' => array(
			'client_id' => array('type' => 'int','precision' => '11','nullable' => False),
			'state_id' => array('type' => 'int','precision' => '11','nullable' => False),
			'creator_id' => array('type' => 'int','precision' => '11','nullable' => False),
			'price_ht' => array('type' => 'decimal','precision' => '8','scale' => '2','default' => '0.00'),
			'ticket_spend_time' => array('type' => 'int','precision' => '11','default' => '0'),
			'creation_date' => array('type' => 'int','precision' => '20','nullable' => False),
			'change_date' => array('type' => 'int','precision' => '20','default' => '0'),
			'account_id' => array('type' => 'int','precision' => '11','nullable' => False),
			'price_id' => array('type' => 'auto','nullable' => False)
		),
		'pk' => array('client_id','state_id','price_id'),
		'fk' => array(),
		'ix' => array(),
		'uc' => array()
	));
	return $GLOBALS['setup_info']['spid']['currentver'] = '1.1.042';
}


function spid_upgrade1_1_042()
{
	$GLOBALS['egw_setup']->oProc->RefreshTable('spid_prix_parametres',array(
		'fd' => array(
			'client_id' => array('type' => 'int','precision' => '11','nullable' => False),
			'state_id' => array('type' => 'int','precision' => '11','nullable' => False),
			'creator_id' => array('type' => 'int','precision' => '11','nullable' => False),
			'price_ht' => array('type' => 'decimal','precision' => '8','scale' => '2','default' => '0.00'),
			'ticket_spend_time' => array('type' => 'int','precision' => '11','default' => '0'),
			'creation_date' => array('type' => 'int','precision' => '20','nullable' => False),
			'change_date' => array('type' => 'int','precision' => '20','default' => '0'),
			'account_id' => array('type' => 'int','precision' => '11','nullable' => False),
			'price_id' => array('type' => 'auto','nullable' => False)
		),
		'pk' => array('price_id'),
		'fk' => array(),
		'ix' => array(),
		'uc' => array()
	));

	return $GLOBALS['setup_info']['spid']['currentver'] = '1.1.043';
}


function spid_upgrade1_1_043()
{
	$GLOBALS['egw_setup']->oProc->AlterColumn('spid_factures_details','spend_time',array(
		'type' => 'decimal',
		'precision' => '10',
		'scale' => '2',
		'default' => 'NULL'
	));

	return $GLOBALS['setup_info']['spid']['currentver'] = '1.1.044';
}


function spid_upgrade1_1_044()
{
	$GLOBALS['egw_setup']->oProc->AddColumn('spid_factures_details','extra_ref',array(
		'type' => 'varchar',
		'precision' => '255'
	));
	$GLOBALS['egw_setup']->oProc->AddColumn('spid_factures_details','extra_ns',array(
		'type' => 'varchar',
		'precision' => '255'
	));

	return $GLOBALS['setup_info']['spid']['currentver'] = '1.1.045';
}


function spid_upgrade1_1_045()
{
	$GLOBALS['egw_setup']->oProc->AddColumn('spid_factures_details','extra_ht_unit',array(
		'type' => 'decimal',
		'precision' => '9',
		'scale' => '2'
	));

	return $GLOBALS['setup_info']['spid']['currentver'] = '1.1.046';
}


function spid_upgrade1_1_046()
{
	$GLOBALS['egw_setup']->oProc->AlterColumn('spid_tickets','ticket_budget',array(
		'type' => 'float',
		'precision' => '11',
		'default' => '0'
	));
	$GLOBALS['egw_setup']->oProc->AlterColumn('spid_tickets','ticket_price_student',array(
		'type' => 'float',
		'precision' => '11',
		'default' => 'NULL'
	));

	return $GLOBALS['setup_info']['spid']['currentver'] = '1.1.047';
}


function spid_upgrade1_1_047()
{
	$GLOBALS['egw_setup']->oProc->AlterColumn('spid_factures','facture_number',array(
		'type' => 'varchar',
		'precision' => '50',
		'default' => 'NULL'
	));

	return $GLOBALS['setup_info']['spid']['currentver'] = '1.1.048';
}


function spid_upgrade1_1_048()
{
	/* done by RefreshTable() anyway
	$GLOBALS['egw_setup']->oProc->AddColumn('spid_tickets','client_id',array(
		'type' => 'int',
		'precision' => '4',
		'nullable' => False
	));*/
	/* done by RefreshTable() anyway
	$GLOBALS['egw_setup']->oProc->AddColumn('spid_tickets','ticket_assigned_by_contact',array(
		'type' => 'int',
		'precision' => '4',
		'nullable' => False
	));*/
	$GLOBALS['egw_setup']->oProc->RefreshTable('spid_tickets',array(
		'fd' => array(
			'ticket_id' => array('type' => 'auto','nullable' => False),
			'ticket_num_group' => array('type' => 'int','precision' => '11','nullable' => False),
			'cat_id' => array('type' => 'int','precision' => '11','default' => '0'),
			'account_id' => array('type' => 'int','precision' => '11','nullable' => False),
			'state_id' => array('type' => 'int','precision' => '11','default' => '0'),
			'facture_id' => array('type' => 'int','precision' => '11','default' => '0'),
			'creator_id' => array('type' => 'int','precision' => '11','nullable' => False),
			'ticket_title' => array('type' => 'varchar','precision' => '255','default' => 'NULL'),
			'ticket_priority' => array('type' => 'int','precision' => '2','default' => '0'),
			'ticket_assigned_to' => array('type' => 'int','precision' => '11','nullable' => False),
			'ticket_assigned_by' => array('type' => 'int','precision' => '11','nullable' => False),
			'ticket_spend_time' => array('type' => 'float','precision' => '11','default' => '0'),
			'creation_date' => array('type' => 'int','precision' => '20','nullable' => False,'default' => '0'),
			'change_date' => array('type' => 'int','precision' => '20','default' => '0'),
			'closed_date' => array('type' => 'int','precision' => '20','default' => '0'),
			'due_date' => array('type' => 'int','precision' => '20','default' => '0'),
			'ticket_closed' => array('type' => 'int','precision' => '2','default' => '0'),
			'ticket_invoice' => array('type' => 'int','precision' => '2','default' => '0'),
			'location_id' => array('type' => 'int','precision' => '11','default' => '0'),
			'location_precision' => array('type' => 'varchar','precision' => '255','default' => 'NULL'),
			'ticket_private' => array('type' => 'int','precision' => '1','nullable' => False,'default' => '0'),
			'ticket_budget' => array('type' => 'float','precision' => '11','default' => '0'),
			'contract_id' => array('type' => 'int','precision' => '4'),
			'ticket_unit_time' => array('type' => 'int','precision' => '4'),
			'ticket_nb_student' => array('type' => 'int','precision' => '11','default' => 'NULL'),
			'ticket_price_student' => array('type' => 'float','precision' => '11','default' => 'NULL'),
			'client_id' => array('type' => 'int','precision' => '4','nullable' => False),
			'ticket_assigned_by_contact' => array('type' => 'int','precision' => '4','nullable' => False)
		),
		'pk' => array('ticket_id'),
		'fk' => array('client_id' => 'spiclient','ticket_assigned_by_contact' => 'egw_addressbook'),
		'ix' => array(),
		'uc' => array()
	));

	return $GLOBALS['setup_info']['spid']['currentver'] = '1.1.049';
}

// Spirea-YLF - 18/07/2012 - Update permettant la maintenance des donnes suite a l'ajout des champs client_id et ticket_assigned_by_contact
// UPDATE spid_tickets SET client_id = (SELECT client_id FROM spiclient WHERE spiclient.account_id = spid_tickets.account_id)
// UPDATE spid_tickets SET ticket_assigned_by_contact = (SELECT contact_id FROM egw_addressbook WHERE egw_addressbook.account_id = spid_tickets.ticket_assigned_by)


function spid_upgrade1_1_049()
{
	$GLOBALS['egw_setup']->oProc->CreateTable('spid_checklist',array(
		'fd' => array(
			'ticket_id' => array('type' => 'int','precision' => '4','nullable' => False),
			'chk_id' => array('type' => 'int','precision' => '4','nullable' => False)
		),
		'pk' => array('ticket_id','chk_id'),
		'fk' => array(),
		'ix' => array(),
		'uc' => array()
	));

	return $GLOBALS['setup_info']['spid']['currentver'] = '1.1.050';
}


function spid_upgrade1_1_050()
{
	/* done by RefreshTable() anyway
	$GLOBALS['egw_setup']->oProc->AddColumn('spid_factures','facture_tva_id',array(
		'type' => 'int',
		'precision' => '4'
	));*/
	$GLOBALS['egw_setup']->oProc->RefreshTable('spid_factures',array(
		'fd' => array(
			'facture_id' => array('type' => 'auto','nullable' => False),
			'client_id' => array('type' => 'int','precision' => '11','nullable' => False),
			'creator_id' => array('type' => 'int','precision' => '11','nullable' => False),
			'facture_number' => array('type' => 'varchar','precision' => '50','default' => 'NULL'),
			'total_ht' => array('type' => 'decimal','precision' => '9','scale' => '2','default' => '0.00'),
			'nb_open_start' => array('type' => 'int','precision' => '11','default' => '0'),
			'nb_open_during' => array('type' => 'int','precision' => '11','default' => '0'),
			'nb_close_during' => array('type' => 'int','precision' => '11','default' => '0'),
			'nb_open_end' => array('type' => 'int','precision' => '11','default' => '0'),
			'creation_date' => array('type' => 'int','precision' => '20','nullable' => False),
			'change_date' => array('type' => 'int','precision' => '20','default' => 'NULL'),
			'send_date' => array('type' => 'int','precision' => '20','default' => 'NULL'),
			'validation_date' => array('type' => 'int','precision' => '20','default' => 'NULL'),
			'start_period_date' => array('type' => 'int','precision' => '20','default' => 'NULL'),
			'end_period_date' => array('type' => 'int','precision' => '20','default' => 'NULL'),
			'account_id' => array('type' => 'int','precision' => '11','nullable' => False),
			'generated_pdf' => array('type' => 'int','precision' => '2','default' => '0'),
			'invoice_validate' => array('type' => 'int','precision' => '2','default' => '0'),
			'invoice_message' => array('type' => 'text','default' => 'NULL'),
			'alone_invoice' => array('type' => 'int','precision' => '4','nullable' => False,'default' => '0'),
			'societe_id' => array('type' => 'int','precision' => '11','nullable' => False),
			'invoice_send' => array('type' => 'int','precision' => '2','default' => '0'),
			'modifier_id' => array('type' => 'int','precision' => '11','default' => '0'),
			'facture_tva' => array('type' => 'bool'),
			'facture_taux_tva' => array('type' => 'decimal','precision' => '9','scale' => '2'),
			'payment_date' => array('type' => 'int','precision' => '20'),
			'payment_bank' => array('type' => 'varchar','precision' => '50'),
			'payment_amount' => array('type' => 'decimal','precision' => '9','scale' => '2'),
			'invoice_payed' => array('type' => 'bool','default' => '0'),
			'facture_tva_id' => array('type' => 'int','precision' => '4')
		),
		'pk' => array('facture_id'),
		'fk' => array('facture_tva_id' => 'spireapi_vat'),
		'ix' => array(),
		'uc' => array('facture_number')
	));

	return $GLOBALS['setup_info']['spid']['currentver'] = '1.1.051';
}


function spid_upgrade1_1_051()
{
	/* done by RefreshTable() anyway
	$GLOBALS['egw_setup']->oProc->AddColumn('spid_factures_details','vat_id',array(
		'type' => 'int',
		'precision' => '4'
	));*/
	/* done by RefreshTable() anyway
	$GLOBALS['egw_setup']->oProc->AddColumn('spid_factures_details','vat_rate',array(
		'type' => 'decimal',
		'precision' => '10',
		'scale' => '2'
	));*/
	$GLOBALS['egw_setup']->oProc->RefreshTable('spid_factures_details',array(
		'fd' => array(
			'detail_id' => array('type' => 'auto','nullable' => False),
			'facture_id' => array('type' => 'int','precision' => '11','nullable' => False),
			'quantity' => array('type' => 'int','precision' => '11','default' => 'NULL'),
			'spend_time' => array('type' => 'decimal','precision' => '10','scale' => '2','default' => 'NULL'),
			'total_ht' => array('type' => 'decimal','precision' => '9','scale' => '2','default' => '0.00'),
			'state_id' => array('type' => 'int','precision' => '11','default' => 'NULL'),
			'ticket_id' => array('type' => 'int','precision' => '11','default' => 'NULL'),
			'extra_cat_id' => array('type' => 'int','precision' => '11'),
			'extra_label' => array('type' => 'varchar','precision' => '255'),
			'extra_ht' => array('type' => 'decimal','precision' => '9','scale' => '2'),
			'extra_rank' => array('type' => 'int','precision' => '11'),
			'extra_ref' => array('type' => 'varchar','precision' => '255'),
			'extra_ns' => array('type' => 'varchar','precision' => '255'),
			'extra_ht_unit' => array('type' => 'decimal','precision' => '9','scale' => '2'),
			'vat_id' => array('type' => 'int','precision' => '4'),
			'vat_rate' => array('type' => 'decimal','precision' => '10','scale' => '2')
		),
		'pk' => array('detail_id'),
		'fk' => array('vat_id' => 'spireapi_vat'),
		'ix' => array(),
		'uc' => array()
	));

	return $GLOBALS['setup_info']['spid']['currentver'] = '1.1.052';
}


function spid_upgrade1_1_052()
{
	$GLOBALS['egw_setup']->oProc->AlterColumn('spid_etats','state_price',array(
		'type' => 'decimal',
		'precision' => '10',
		'scale' => '2',
		'default' => 'NULL'
	));

	return $GLOBALS['setup_info']['spid']['currentver'] = '1.1.053';
}


function spid_upgrade1_1_053()
{
	$GLOBALS['egw_setup']->oProc->AddColumn('spid_factures','payment_model',array(
		'type' => 'int',
		'precision' => '4'
	));

	return $GLOBALS['setup_info']['spid']['currentver'] = '1.1.054';
}


function spid_upgrade1_1_054()
{
	$GLOBALS['egw_setup']->oProc->AddColumn('spid_facture_categories','cat_account',array(
		'type' => 'int',
		'precision' => '4'
	));

	return $GLOBALS['setup_info']['spid']['currentver'] = '1.1.055';
}


function spid_upgrade1_1_055()
{
	$GLOBALS['egw_setup']->oProc->AddColumn('spid_factures','invoice_export',array(
		'type' => 'bool'
	));
	$GLOBALS['egw_setup']->oProc->AddColumn('spid_factures','invoice_export_date',array(
		'type' => 'int',
		'precision' => '20'
	));
	$GLOBALS['egw_setup']->oProc->AddColumn('spid_factures','invoice_export_user',array(
		'type' => 'int',
		'precision' => '4'
	));

	return $GLOBALS['setup_info']['spid']['currentver'] = '1.1.056';
}


function spid_upgrade1_1_056()
{
	$GLOBALS['egw_setup']->oProc->AddColumn('spid_tickets','ticket_client_order',array(
		'type' => 'varchar',
		'precision' => '50'
	));
	$GLOBALS['egw_setup']->oProc->AddColumn('spid_tickets','ticket_client_order_id',array(
		'type' => 'int',
		'precision' => '4'
	));

	return $GLOBALS['setup_info']['spid']['currentver'] = '1.1.057';
}


function spid_upgrade1_1_057()
{
	$GLOBALS['egw_setup']->oProc->AddColumn('spid_tickets','ticket_prov_order_id',array(
		'type' => 'int',
		'precision' => '4'
	));
	$GLOBALS['egw_setup']->oProc->AddColumn('spid_tickets','ticket_prov_pro_id',array(
		'type' => 'int',
		'precision' => '4'
	));

	return $GLOBALS['setup_info']['spid']['currentver'] = '1.1.058';
}


function spid_upgrade1_1_058()
{
	$GLOBALS['egw_setup']->oProc->AlterColumn('spid_tickets','ticket_client_order_id',array(
		'type' => 'varchar',
		'precision' => '50'
	));
	$GLOBALS['egw_setup']->oProc->AlterColumn('spid_tickets','ticket_prov_order_id',array(
		'type' => 'varchar',
		'precision' => '50'
	));
	$GLOBALS['egw_setup']->oProc->AlterColumn('spid_tickets','ticket_prov_pro_id',array(
		'type' => 'varchar',
		'precision' => '50'
	));

	return $GLOBALS['setup_info']['spid']['currentver'] = '1.1.059';
}


function spid_upgrade1_1_059()
{
	$GLOBALS['egw_setup']->oProc->AddColumn('spid_etats','state_auto_id',array(
		'type' => 'int',
		'precision' => '4'
	));

	return $GLOBALS['setup_info']['spid']['currentver'] = '1.1.060';
}


function spid_upgrade1_1_060()
{
	$GLOBALS['egw_setup']->oProc->AddColumn('spid_prix_parametres','contract_id',array(
		'type' => 'int',
		'precision' => '4'
	));

	return $GLOBALS['setup_info']['spid']['currentver'] = '1.1.061';
}

